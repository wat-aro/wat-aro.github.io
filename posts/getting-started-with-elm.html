<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Elm ことはじめ | (wat-aro)</title><meta name="next-head-count" content="3"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/f86d7e47df025b6c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f86d7e47df025b6c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c0d903a3b476b773.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-36fb89e31f7cc580.js" defer=""></script><script src="/_next/static/Zsryq-u8SuVFnFd_FCZ9w/_buildManifest.js" defer=""></script><script src="/_next/static/Zsryq-u8SuVFnFd_FCZ9w/_ssgManifest.js" defer=""></script><script src="/_next/static/Zsryq-u8SuVFnFd_FCZ9w/_middlewareManifest.js" defer=""></script></head><body><noscript>
            <iframe
              src="https://www.googletagmanager.com/ns.html?id=GTM-MW6D56L"
              height="0"
              width="0"
              style="display:none;visibility:hidden"
            /></noscript><div id="__next"><div class="py-0 md:px-8 min-h-screen flex flex-col items-center"><div class="top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><a href="/"><div class="flex items-center font-midium text-3xl h-full font-bold gap-4"><img class="rounded-full" src="/images/profile.jpg" width="48" height="48" alt="profile image"/>(wat-aro)<!-- --></div></a><ul class="flex gap-3 h-full"><li class="h-full  flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li><li class="h-full  flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts">Blog</a></li></ul></div><div class="flex md:justify-center justify-between w-full"><div class="flex flex-col sm:max-w-sm md:max-w-4xl w-full py-4 px-4"><article class="flex max-w-4xl w-full"><div class="py-4 w-full"><div class="mr-2 text-xs font-bold">2019-10-28</div><h1 class="font-bold text-3xl text-black">Elm ことはじめ</h1><nav class="flex mt-7 items-start text-gray-500"><div class="flex flex-nowrap max-w-full overflow-x-auto"></div></nav><div class="znc"><h1><code>Elm</code> ことはじめ</h1>
<hr>
<h2>自己紹介</h2>
<ul>
<li>wat-aro</li>
<li>10%の時間では Elm でフロントエンドをやっていました</li>
<li>関数型が好きです</li>
</ul>
<hr>
<h2>おしながき</h2>
<ul>
<li>Elm とは</li>
<li>文法</li>
<li>TEA</li>
<li>まとめ</li>
</ul>
<hr>
<h2>Elm とは</h2>
<ul>
<li>静的型付け Alt JS</li>
<li>A delightfull language</li>
<li>No Runtime Exception</li>
<li>Great Peerformance</li>
<li>Small Assets</li>
</ul>
<hr>
<h3>静的型付けの Alt JS</h3>
<p>Haskell like な見た目</p>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">map</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token constant">List</span> <span class="token hvariable">b</span>
</span><span class="code-line"><span class="token hvariable">map</span> <span class="token hvariable">f</span> <span class="token hvariable">list</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token keyword">case</span> <span class="token hvariable">list</span> <span class="token keyword">of</span>
</span><span class="code-line">    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">map</span> <span class="token hvariable">f</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h3>静的型付けの Alt JS</h3>
<p>強力な型推論と親切なエラーメッセージ</p>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token operator">></span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">"1"</span>
</span><span class="code-line"><span class="token comment">-- TYPE MISMATCH ----------------------------------------------------------- elm</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token constant">I</span> <span class="token hvariable">cannot</span> <span class="token hvariable">do</span> <span class="token hvariable">addition</span> <span class="token hvariable">with</span> <span class="token constant">String</span> <span class="token hvariable">values</span> <span class="token hvariable">like</span> <span class="token hvariable">this</span> <span class="token hvariable">one</span><span class="token operator">:</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token number">4</span><span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">"1"</span>
</span><span class="code-line">         <span class="token operator">^^^</span>
</span><span class="code-line"><span class="token constant">The</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token hvariable">operator</span> <span class="token hvariable">only</span> <span class="token hvariable">works</span> <span class="token hvariable">with</span> <span class="token constant">Int</span> <span class="token hvariable">and</span> <span class="token constant">Float</span> <span class="token hvariable">values</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token constant">Hint</span><span class="token operator">:</span> <span class="token constant">Switch</span> <span class="token hvariable">to</span> <span class="token hvariable">the</span> <span class="token punctuation">(</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token hvariable">operator</span> <span class="token hvariable">to</span> <span class="token hvariable">append</span> <span class="token hvariable">strings</span><span class="token operator">!</span>
</span></code></pre>
<hr>
<h3>A delightful language</h3>
<p>公式サイトが言ってます</p>
<p><a href="https://gyazo.com/772c9e8c416140a595a7ca586a66a159"><img src="https://i.gyazo.com/772c9e8c416140a595a7ca586a66a159.png" alt="Image from Gyazo"></a></p>
<hr>
<h3>Great Peerformance</h3>
<p><a href="https://gyazo.com/50ecbb1475d7b22a2495ebdc087d59af"><img src="https://i.gyazo.com/50ecbb1475d7b22a2495ebdc087d59af.png" alt="Image from Gyazo"></a></p>
<hr>
<h3>Small Assets</h3>
<p><a href="https://gyazo.com/7e580ab002610cd302a89046d9e28e0a"><img src="https://i.gyazo.com/7e580ab002610cd302a89046d9e28e0a.png" alt="Image from Gyazo"></a></p>
<hr>
<hr>
<h2>文法</h2>
<ul>
<li>デフォルトカリー化</li>
<li>Haskell-like 型定義</li>
<li>パターンマッチ</li>
</ul>
<hr>
<h3>デフォルトカリー化</h3>
<p>ML や Haskell のようにデフォルトでカリー化されている</p>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">add</span> <span class="token operator">:</span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token constant">Int</span>
</span><span class="code-line"><span class="token hvariable">add</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token hvariable">y</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">add</span> <span class="token number">2</span> <span class="token number">3</span>  <span class="token comment">-- 5</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">add2</span> <span class="token operator">:</span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token constant">Int</span>
</span><span class="code-line"><span class="token hvariable">add2</span> <span class="token operator">=</span> <span class="token hvariable">add</span> <span class="token number">2</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">add2</span> <span class="token number">3</span> <span class="token comment">-- 5</span>
</span></code></pre>
<hr>
<h3>Haskell-like 型定義</h3>
<ul>
<li>Haskell like な型定義</li>
<li>代数的データ型</li>
<li>型クラスはない</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span>
</span><span class="code-line">  <span class="token operator">=</span> <span class="token constant">Just</span> <span class="token hvariable">a</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token constant">Nothing</span>
</span></code></pre>
<p>型アノテーションのコロンは一つ</p>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token number">42</span> <span class="token operator">:</span> <span class="token constant">Int</span>
</span><span class="code-line"><span class="token string">"Hello Elm"</span> <span class="token operator">:</span> <span class="token constant">String</span>
</span></code></pre>
<hr>
<h3>パターンマッチ</h3>
<ul>
<li>型定義に沿った形でパターンマッチができる</li>
<li>網羅性検査もされるので漏れが出ない</li>
<li>漏れているとコンパイルエラー</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span>
</span><span class="code-line">  <span class="token operator">=</span> <span class="token constant">Just</span> <span class="token hvariable">a</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token constant">Nothing</span>
</span></code></pre>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">map</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">Maybe</span> <span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token constant">Maybe</span> <span class="token hvariable">b</span>
</span><span class="code-line"><span class="token hvariable">map</span> <span class="token hvariable">f</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">x</span> <span class="token keyword">of</span>
</span><span class="code-line">  <span class="token constant">Just</span> <span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token constant">Maybe</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token constant">Nothing</span> <span class="token operator">-></span> <span class="token constant">Nothing</span>
</span><span class="code-line">
</span></code></pre>
<hr>
<hr>
<h2>The Elm Architecture(TEA)</h2>
<ul>
<li><code>view</code>は<code>model</code>を受け取って<code>HTML</code>を作成する</li>
<li><code>HTML</code>から<code>msg</code>を投げ、<code>update</code>が現在の<code>model</code>と<code>msg</code>から新しい<code>model</code>を作成する</li>
<li>新しい<code>model</code>から再度<code>HTML</code>を作成する</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">sandbox</span> <span class="token operator">:</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token hvariable">init</span> <span class="token operator">:</span> <span class="token hvariable">model</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token hvariable">msg</span> <span class="token operator">-></span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token hvariable">model</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">-></span> <span class="token constant">Program</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token hvariable">model</span> <span class="token hvariable">msg</span>
</span></code></pre>
<hr>
<h3>sandbox のライフサイクル</h3>
<p><img src="https://guide.elm-lang.org/effects/diagrams/sandbox.svg" alt="Browser.sandbox"></p>
<hr>
<h3>カヌンターアプリの例</h3>
<ul>
<li><code>+</code> ボタンと <code>-</code> ボタンがあるカウンター</li>
<li><a href="https://elm-lang.org/examples/buttons">https://elm-lang.org/examples/buttons</a></li>
<li>モデルの初期値は 0</li>
<li>update と view はそれぞれの名前の関数</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">sandbox</span> <span class="token operator">:</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token hvariable">init</span> <span class="token operator">:</span> <span class="token hvariable">model</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token hvariable">msg</span> <span class="token operator">-></span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token hvariable">model</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">-></span> <span class="token constant">Program</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token hvariable">model</span> <span class="token hvariable">msg</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">main</span> <span class="token operator">:</span> <span class="token constant">Program</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token constant">Int</span> <span class="token constant">Msg</span>
</span><span class="code-line"><span class="token hvariable">main</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token hvariable">Browser.sandbox</span> <span class="token punctuation">{</span> <span class="token hvariable">init</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token hvariable">update</span> <span class="token operator">=</span> <span class="token hvariable">update</span><span class="token punctuation">,</span> <span class="token hvariable">view</span> <span class="token operator">=</span> <span class="token hvariable">view</span> <span class="token punctuation">}</span>
</span></code></pre>
<hr>
<h3>まずはメッセージの型定義から</h3>
<ul>
<li>Msg は Increment と Decrement の二つ</li>
<li>Increment が来たら model を +1 する</li>
<li>Decrement が来たら model を -1 する</li>
<li>RunTime System が update の返り値を受け取り現在のモデルを更新する</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token constant">Msg</span> <span class="token operator">=</span> <span class="token constant">Increment</span> <span class="token operator">|</span> <span class="token constant">Decrement</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token constant">Msg</span> <span class="token operator">-></span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token constant">Int</span>
</span><span class="code-line"><span class="token hvariable">update</span> <span class="token hvariable">msg</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token keyword">case</span> <span class="token hvariable">msg</span> <span class="token keyword">of</span>
</span><span class="code-line">    <span class="token constant">Increment</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token hvariable">model</span> <span class="token operator">+</span> <span class="token number">1</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token constant">Decrement</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token hvariable">model</span> <span class="token operator">-</span> <span class="token number">1</span>
</span></code></pre>
<hr>
<h3>描画に使う関数</h3>
<ul>
<li>HTML タグ のタグも関数で定義されている</li>
<li>div の第一引数は Attribute msg のリスト</li>
<li>div の第二引数は Html msg のリスト</li>
<li>onClick の引数に msg を渡すと、クリックされた時にそのメッセージを投げる</li>
<li>text は文字列の描画用の関数</li>
<li>型変数になっている部分は型推論で解決される</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">div</span> <span class="token operator">:</span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Attribute</span> <span class="token hvariable">msg</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Html</span> <span class="token hvariable">msg</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span><span class="code-line"><span class="token hvariable">button</span> <span class="token operator">:</span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Attribute</span> <span class="token hvariable">msg</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Html</span> <span class="token hvariable">msg</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span><span class="code-line"><span class="token hvariable">onClick</span> <span class="token operator">:</span> <span class="token hvariable">msg</span> <span class="token operator">-></span> <span class="token constant">Attribute</span> <span class="token hvariable">msg</span>
</span><span class="code-line"><span class="token hvariable">text</span> <span class="token operator">:</span> <span class="token constant">String</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span></code></pre>
<hr>
<h3>描画部分</h3>
<ul>
<li>さっきの関数を使って view を構成する</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token constant">Msg</span>
</span><span class="code-line"><span class="token hvariable">view</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">[</span> <span class="token hvariable">button</span> <span class="token punctuation">[</span> <span class="token hvariable">onClick</span> <span class="token constant">Decrement</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"-"</span> <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token punctuation">(</span><span class="token hvariable">String.fromInt</span> <span class="token hvariable">model</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">button</span> <span class="token punctuation">[</span> <span class="token hvariable">onClick</span> <span class="token constant">Increment</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"+"</span> <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span></code></pre>
<hr>
<h3>副作用を扱う例(Cat gifs)</h3>
<ul>
<li>猫の GIF 画像をランダムに取得し描画するアプリ</li>
<li><a href="https://elm-lang.org/examples/cat-gifs">https://elm-lang.org/examples/cat-gifs</a></li>
<li><code>element</code> を使う</li>
</ul>
<hr>
<h3>Browser.element</h3>
<ul>
<li><code>view</code>は変わらない</li>
<li><code>update</code>の返り値が <code>model</code>から<code>(model, Cmd msg)</code>に変更</li>
<li>外部からのイベントを扱う <code>subscriptions</code> が追加(今回は扱いません)</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">element</span> <span class="token operator">:</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token hvariable">init</span> <span class="token operator">:</span> <span class="token hvariable">flags</span> <span class="token operator">-></span> <span class="token punctuation">(</span> <span class="token hvariable">model</span><span class="token punctuation">,</span> <span class="token constant">Cmd</span> <span class="token hvariable">msg</span> <span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token hvariable">msg</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token hvariable">msg</span> <span class="token operator">-></span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token punctuation">(</span> <span class="token hvariable">model</span><span class="token punctuation">,</span> <span class="token constant">Cmd</span> <span class="token hvariable">msg</span> <span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">subscriptions</span> <span class="token operator">:</span> <span class="token hvariable">model</span> <span class="token operator">-></span> <span class="token constant">Sub</span> <span class="token hvariable">msg</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">-></span> <span class="token constant">Program</span> <span class="token hvariable">flags</span> <span class="token hvariable">model</span> <span class="token hvariable">msg</span>
</span></code></pre>
<hr>
<h3>Cmd とは</h3>
<ul>
<li>主に副作用を扱う(e.g. HTTP リクエスト, 乱数生成, 現在時の取得)</li>
<li>実行した結果 <code>Cmd msg</code> を返し、その<code>msg</code>が <code>Runtime System</code> によって <code>update</code>に渡される</li>
</ul>
<hr>
<h3>副作用を扱った場合のライフサイクル</h3>
<p><img src="https://guide.elm-lang.org/effects/diagrams/element.svg" alt="Browser.element"></p>
<hr>
<h3>Cat Gifs の Msg</h3>
<ul>
<li>再度猫 Gif を取得する MorePlease</li>
<li>猫 Gif の取得した結果を表す GotGif (Result Http.Error String)</li>
<li>Result error value 型は成功・失敗を表すことが出来る</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token constant">Msg</span>
</span><span class="code-line">  <span class="token operator">=</span> <span class="token constant">MorePlease</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token constant">GotGif</span> <span class="token punctuation">(</span><span class="token constant">Result</span> <span class="token constant">Http.Error</span> <span class="token constant">String</span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h3>Cat Gif の Model</h3>
<ul>
<li>猫画像取に失敗したら Failure</li>
<li>取得中は Loading</li>
<li>取得に成功したら Success に 猫 Gif の URL を文字列で持つ</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token constant">Model</span>
</span><span class="code-line">  <span class="token operator">=</span> <span class="token constant">Failure</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token constant">Loading</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token constant">Success</span> <span class="token constant">String</span>
</span></code></pre>
<hr>
<h3>Cat Gif の Initialize phase</h3>
<ul>
<li>モデルの初期値は Loading</li>
<li>getRandomCatGif で猫 Gif を取得する</li>
<li>Http.get の返り値の型が Cmd msg なので Cmd を強制される</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">init</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token constant">Model</span><span class="token punctuation">,</span> <span class="token constant">Cmd</span> <span class="token constant">Msg</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token hvariable">init</span> _ <span class="token operator">=</span>
</span><span class="code-line">  <span class="token punctuation">(</span><span class="token constant">Loading</span><span class="token punctuation">,</span> <span class="token hvariable">getRandomCatGif</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">get</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token hvariable">url</span> <span class="token operator">:</span> <span class="token constant">String</span><span class="token punctuation">,</span> <span class="token hvariable">expect</span> <span class="token operator">:</span> <span class="token constant">Expect</span> <span class="token hvariable">msg</span> <span class="token punctuation">}</span> <span class="token operator">-></span> <span class="token constant">Cmd</span> <span class="token hvariable">msg</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">getRandomCatGif</span> <span class="token operator">:</span> <span class="token constant">Cmd</span> <span class="token constant">Msg</span>
</span><span class="code-line"><span class="token hvariable">getRandomCatGif</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token hvariable">Http.get</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token hvariable">url</span> <span class="token operator">=</span> <span class="token string">"https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&#x26;tag=cat"</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">expect</span> <span class="token operator">=</span> <span class="token hvariable">Http.expectJson</span> <span class="token constant">GotGif</span> <span class="token hvariable">gifDecoder</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span></code></pre>
<hr>
<h3>Cat Gif の更新 phase</h3>
<ul>
<li>MorePlease メッセージなら Loading 状態にして猫 Gif を取得しにいく</li>
<li>取得した結果、成功していればモデルに URL を入れて描画、失敗していれば Failure 画面に</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">update</span> <span class="token operator">:</span> <span class="token constant">Msg</span> <span class="token operator">-></span> <span class="token constant">Model</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token constant">Model</span><span class="token punctuation">,</span> <span class="token constant">Cmd</span> <span class="token constant">Msg</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token hvariable">update</span> <span class="token hvariable">msg</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token keyword">case</span> <span class="token hvariable">msg</span> <span class="token keyword">of</span>
</span><span class="code-line">    <span class="token constant">MorePlease</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token punctuation">(</span><span class="token constant">Loading</span><span class="token punctuation">,</span> <span class="token hvariable">getRandomCatGif</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token constant">GotGif</span> <span class="token hvariable">result</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token keyword">case</span> <span class="token hvariable">result</span> <span class="token keyword">of</span>
</span><span class="code-line">        <span class="token constant">Ok</span> <span class="token hvariable">url</span> <span class="token operator">-></span>
</span><span class="code-line">          <span class="token punctuation">(</span><span class="token constant">Success</span> <span class="token hvariable">url</span><span class="token punctuation">,</span> <span class="token hvariable">Cmd.none</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token constant">Err</span> _ <span class="token operator">-></span>
</span><span class="code-line">          <span class="token punctuation">(</span><span class="token constant">Failure</span><span class="token punctuation">,</span> <span class="token hvariable">Cmd.none</span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h3>Cat Gif の描画</h3>
<ul>
<li>view でもパターンマッチで状態を網羅して描画しているかが検査できる</li>
</ul>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line"><span class="token hvariable">view</span> <span class="token operator">:</span> <span class="token constant">Model</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token constant">Msg</span>
</span><span class="code-line"><span class="token hvariable">view</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">[</span> <span class="token hvariable">h2</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"Random Cats"</span> <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">,</span> <span class="token hvariable">viewGif</span> <span class="token hvariable">model</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">viewGif</span> <span class="token operator">:</span> <span class="token constant">Model</span> <span class="token operator">-></span> <span class="token constant">Html</span> <span class="token constant">Msg</span>
</span><span class="code-line"><span class="token hvariable">viewGif</span> <span class="token hvariable">model</span> <span class="token operator">=</span>
</span><span class="code-line">  <span class="token keyword">case</span> <span class="token hvariable">model</span> <span class="token keyword">of</span>
</span><span class="code-line">    <span class="token constant">Failure</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">        <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"I could not load a random cat for some reason. "</span>
</span><span class="code-line">        <span class="token punctuation">,</span> <span class="token hvariable">button</span> <span class="token punctuation">[</span> <span class="token hvariable">onClick</span> <span class="token constant">MorePlease</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"Try Again!"</span> <span class="token punctuation">]</span>
</span><span class="code-line">        <span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token constant">Loading</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token hvariable">text</span> <span class="token string">"Loading..."</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token constant">Success</span> <span class="token hvariable">url</span> <span class="token operator">-></span>
</span><span class="code-line">      <span class="token hvariable">div</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">        <span class="token punctuation">[</span> <span class="token hvariable">button</span> <span class="token punctuation">[</span> <span class="token hvariable">onClick</span> <span class="token constant">MorePlease</span><span class="token punctuation">,</span> <span class="token hvariable">style</span> <span class="token string">"display"</span> <span class="token string">"block"</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token hvariable">text</span> <span class="token string">"More Please!"</span> <span class="token punctuation">]</span>
</span><span class="code-line">        <span class="token punctuation">,</span> <span class="token hvariable">img</span> <span class="token punctuation">[</span> <span class="token hvariable">src</span> <span class="token hvariable">url</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">        <span class="token punctuation">]</span>
</span></code></pre>
<hr>
<h3>TEA</h3>
<ul>
<li>副作用を扱わない場合 model, update, message, view によって構成される</li>
<li>view から message を投げ、その message に合わせて model を更新する</li>
<li>副作用を扱う場合は update から副作用(Cmd)を実行し、Cmd からまた message を投げ update で受け取る</li>
<li>今回は見ていないけれど、外部からの入力(時間によって発するイベントや websocket のイベントなど**は subscription で扱う</li>
</ul>
<hr>
<h2>まとめ</h2>
<ul>
<li>Elm の基本的なところを紹介しました</li>
<li>TEA を紹介しました</li>
<li>簡潔な型定義とパターンマッチで安全にフロントエンドが開発できるよ！</li>
</ul></div></div></article></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Elm ことはじめ","published":"2019-10-28","content":"\u003ch1\u003e\u003ccode\u003eElm\u003c/code\u003e ことはじめ\u003c/h1\u003e\n\u003chr\u003e\n\u003ch2\u003e自己紹介\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ewat-aro\u003c/li\u003e\n\u003cli\u003e10%の時間では Elm でフロントエンドをやっていました\u003c/li\u003e\n\u003cli\u003e関数型が好きです\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003eおしながき\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eElm とは\u003c/li\u003e\n\u003cli\u003e文法\u003c/li\u003e\n\u003cli\u003eTEA\u003c/li\u003e\n\u003cli\u003eまとめ\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003eElm とは\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e静的型付け Alt JS\u003c/li\u003e\n\u003cli\u003eA delightfull language\u003c/li\u003e\n\u003cli\u003eNo Runtime Exception\u003c/li\u003e\n\u003cli\u003eGreat Peerformance\u003c/li\u003e\n\u003cli\u003eSmall Assets\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e静的型付けの Alt JS\u003c/h3\u003e\n\u003cp\u003eHaskell like な見た目\u003c/p\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emap\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emap\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003elist\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003elist\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e::\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003exs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e::\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003emap\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003exs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e静的型付けの Alt JS\u003c/h3\u003e\n\u003cp\u003e強力な型推論と親切なエラーメッセージ\u003c/p\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e-- TYPE MISMATCH ----------------------------------------------------------- elm\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token constant\"\u003eI\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ecannot\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003edo\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eaddition\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ewith\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003evalues\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003elike\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ethis\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eone\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e   \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e         \u003cspan class=\"token operator\"\u003e^^^\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token constant\"\u003eThe\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eoperator\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eonly\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eworks\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ewith\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eand\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFloat\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003evalues\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token constant\"\u003eHint\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSwitch\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eto\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ethe\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eoperator\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eto\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eappend\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003estrings\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eA delightful language\u003c/h3\u003e\n\u003cp\u003e公式サイトが言ってます\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://gyazo.com/772c9e8c416140a595a7ca586a66a159\"\u003e\u003cimg src=\"https://i.gyazo.com/772c9e8c416140a595a7ca586a66a159.png\" alt=\"Image from Gyazo\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eGreat Peerformance\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://gyazo.com/50ecbb1475d7b22a2495ebdc087d59af\"\u003e\u003cimg src=\"https://i.gyazo.com/50ecbb1475d7b22a2495ebdc087d59af.png\" alt=\"Image from Gyazo\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eSmall Assets\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://gyazo.com/7e580ab002610cd302a89046d9e28e0a\"\u003e\u003cimg src=\"https://i.gyazo.com/7e580ab002610cd302a89046d9e28e0a.png\" alt=\"Image from Gyazo\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch2\u003e文法\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eデフォルトカリー化\u003c/li\u003e\n\u003cli\u003eHaskell-like 型定義\u003c/li\u003e\n\u003cli\u003eパターンマッチ\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eデフォルトカリー化\u003c/h3\u003e\n\u003cp\u003eML や Haskell のようにデフォルトでカリー化されている\u003c/p\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ey\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ey\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e-- 5\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eadd\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eadd2\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e \u003cspan class=\"token comment\"\u003e-- 5\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eHaskell-like 型定義\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHaskell like な型定義\u003c/li\u003e\n\u003cli\u003e代数的データ型\u003c/li\u003e\n\u003cli\u003e型クラスはない\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMaybe\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJust\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNothing\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e型アノテーションのコロンは一つ\u003c/p\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token number\"\u003e42\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string\"\u003e\"Hello Elm\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eパターンマッチ\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e型定義に沿った形でパターンマッチができる\u003c/li\u003e\n\u003cli\u003e網羅性検査もされるので漏れが出ない\u003c/li\u003e\n\u003cli\u003e漏れているとコンパイルエラー\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMaybe\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJust\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNothing\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emap\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMaybe\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMaybe\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emap\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token constant\"\u003eJust\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMaybe\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token constant\"\u003eNothing\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNothing\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch2\u003eThe Elm Architecture(TEA)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eview\u003c/code\u003eは\u003ccode\u003emodel\u003c/code\u003eを受け取って\u003ccode\u003eHTML\u003c/code\u003eを作成する\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eHTML\u003c/code\u003eから\u003ccode\u003emsg\u003c/code\u003eを投げ、\u003ccode\u003eupdate\u003c/code\u003eが現在の\u003ccode\u003emodel\u003c/code\u003eと\u003ccode\u003emsg\u003c/code\u003eから新しい\u003ccode\u003emodel\u003c/code\u003eを作成する\u003c/li\u003e\n\u003cli\u003e新しい\u003ccode\u003emodel\u003c/code\u003eから再度\u003ccode\u003eHTML\u003c/code\u003eを作成する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003esandbox\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eProgram\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003esandbox のライフサイクル\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://guide.elm-lang.org/effects/diagrams/sandbox.svg\" alt=\"Browser.sandbox\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eカヌンターアプリの例\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e+\u003c/code\u003e ボタンと \u003ccode\u003e-\u003c/code\u003e ボタンがあるカウンター\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://elm-lang.org/examples/buttons\"\u003ehttps://elm-lang.org/examples/buttons\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eモデルの初期値は 0\u003c/li\u003e\n\u003cli\u003eupdate と view はそれぞれの名前の関数\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003esandbox\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eProgram\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emain\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eProgram\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003emain\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token hvariable\"\u003eBrowser.sandbox\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eまずはメッセージの型定義から\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMsg は Increment と Decrement の二つ\u003c/li\u003e\n\u003cli\u003eIncrement が来たら model を +1 する\u003c/li\u003e\n\u003cli\u003eDecrement が来たら model を -1 する\u003c/li\u003e\n\u003cli\u003eRunTime System が update の返り値を受け取り現在のモデルを更新する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eIncrement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDecrement\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eIncrement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eDecrement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e描画に使う関数\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHTML タグ のタグも関数で定義されている\u003c/li\u003e\n\u003cli\u003ediv の第一引数は Attribute msg のリスト\u003c/li\u003e\n\u003cli\u003ediv の第二引数は Html msg のリスト\u003c/li\u003e\n\u003cli\u003eonClick の引数に msg を渡すと、クリックされた時にそのメッセージを投げる\u003c/li\u003e\n\u003cli\u003etext は文字列の描画用の関数\u003c/li\u003e\n\u003cli\u003e型変数になっている部分は型推論で解決される\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eAttribute\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eAttribute\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eList\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eonClick\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eAttribute\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e描画部分\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eさっきの関数を使って view を構成する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eInt\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eonClick\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDecrement\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"-\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003eString.fromInt\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eonClick\u003c/span\u003e \u003cspan class=\"token constant\"\u003eIncrement\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"+\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e副作用を扱う例(Cat gifs)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e猫の GIF 画像をランダムに取得し描画するアプリ\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://elm-lang.org/examples/cat-gifs\"\u003ehttps://elm-lang.org/examples/cat-gifs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eelement\u003c/code\u003e を使う\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eBrowser.element\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eview\u003c/code\u003eは変わらない\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eupdate\u003c/code\u003eの返り値が \u003ccode\u003emodel\u003c/code\u003eから\u003ccode\u003e(model, Cmd msg)\u003c/code\u003eに変更\u003c/li\u003e\n\u003cli\u003e外部からのイベントを扱う \u003ccode\u003esubscriptions\u003c/code\u003e が追加(今回は扱いません)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eelement\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eflags\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003esubscriptions\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSub\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eProgram\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eflags\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCmd とは\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e主に副作用を扱う(e.g. HTTP リクエスト, 乱数生成, 現在時の取得)\u003c/li\u003e\n\u003cli\u003e実行した結果 \u003ccode\u003eCmd msg\u003c/code\u003e を返し、その\u003ccode\u003emsg\u003c/code\u003eが \u003ccode\u003eRuntime System\u003c/code\u003e によって \u003ccode\u003eupdate\u003c/code\u003eに渡される\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e副作用を扱った場合のライフサイクル\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://guide.elm-lang.org/effects/diagrams/element.svg\" alt=\"Browser.element\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eCat Gifs の Msg\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e再度猫 Gif を取得する MorePlease\u003c/li\u003e\n\u003cli\u003e猫 Gif の取得した結果を表す GotGif (Result Http.Error String)\u003c/li\u003e\n\u003cli\u003eResult error value 型は成功・失敗を表すことが出来る\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMorePlease\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eGotGif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eResult\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHttp.Error\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCat Gif の Model\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e猫画像取に失敗したら Failure\u003c/li\u003e\n\u003cli\u003e取得中は Loading\u003c/li\u003e\n\u003cli\u003e取得に成功したら Success に 猫 Gif の URL を文字列で持つ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eFailure\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eLoading\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSuccess\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCat Gif の Initialize phase\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eモデルの初期値は Loading\u003c/li\u003e\n\u003cli\u003egetRandomCatGif で猫 Gif を取得する\u003c/li\u003e\n\u003cli\u003eHttp.get の返り値の型が Cmd msg なので Cmd を強制される\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003einit\u003c/span\u003e _ \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eLoading\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003egetRandomCatGif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eget\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eexpect\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eExpect\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003egetRandomCatGif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003egetRandomCatGif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token hvariable\"\u003eHttp.get\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC\u0026#x26;tag=cat\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eexpect\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eHttp.expectJson\u003c/span\u003e \u003cspan class=\"token constant\"\u003eGotGif\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003egifDecoder\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCat Gif の更新 phase\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMorePlease メッセージなら Loading 状態にして猫 Gif を取得しにいく\u003c/li\u003e\n\u003cli\u003e取得した結果、成功していればモデルに URL を入れて描画、失敗していれば Failure 画面に\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCmd\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emsg\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eMorePlease\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eLoading\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003egetRandomCatGif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eGotGif\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eresult\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eresult\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token constant\"\u003eOk\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eSuccess\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eCmd.none\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token constant\"\u003eErr\u003c/span\u003e _ \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eFailure\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eCmd.none\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCat Gif の描画\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eview でもパターンマッチで状態を網羅して描画しているかが検査できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eview\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eh2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Random Cats\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eviewGif\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eviewGif\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eModel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eHtml\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMsg\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003eviewGif\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003emodel\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eFailure\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"I could not load a random cat for some reason. \"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eonClick\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMorePlease\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Try Again!\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eLoading\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Loading...\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token constant\"\u003eSuccess\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token hvariable\"\u003ediv\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ebutton\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eonClick\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMorePlease\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003estyle\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"display\"\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"block\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003etext\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"More Please!\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eimg\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003esrc\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eurl\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eTEA\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e副作用を扱わない場合 model, update, message, view によって構成される\u003c/li\u003e\n\u003cli\u003eview から message を投げ、その message に合わせて model を更新する\u003c/li\u003e\n\u003cli\u003e副作用を扱う場合は update から副作用(Cmd)を実行し、Cmd からまた message を投げ update で受け取る\u003c/li\u003e\n\u003cli\u003e今回は見ていないけれど、外部からの入力(時間によって発するイベントや websocket のイベントなど**は subscription で扱う\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eElm の基本的なところを紹介しました\u003c/li\u003e\n\u003cli\u003eTEA を紹介しました\u003c/li\u003e\n\u003cli\u003e簡潔な型定義とパターンマッチで安全にフロントエンドが開発できるよ！\u003c/li\u003e\n\u003c/ul\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"getting-started-with-elm"},"buildId":"Zsryq-u8SuVFnFd_FCZ9w","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
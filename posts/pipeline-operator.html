<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>(wat-aro) | パイプライン演算子</title><meta name="next-head-count" content="3"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/217933a9921e34cb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/217933a9921e34cb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-fd253f219ab22f69.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-28ca0bac1f94d555.js" defer=""></script><script src="/_next/static/DeXoNIWtvmHXdkEEAH84G/_buildManifest.js" defer=""></script><script src="/_next/static/DeXoNIWtvmHXdkEEAH84G/_ssgManifest.js" defer=""></script><script src="/_next/static/DeXoNIWtvmHXdkEEAH84G/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="py-0 px-8 min-h-screen m-auto flex flex-col items-center"><div class="sticky top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><div class="flex items-center font-midium text-3xl h-full"><a href="/">(wat-aro)</a></div><ul class="flex gap-3 h-full"><li class="h-full  flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li><li class="h-full  flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts">Blog</a></li></ul></div><article class="flex justify-center container"><div class="w-9/12 py-4"><h1 class="font-bold text-3xl text-black">パイプライン演算子</h1><nav class="flex mt-7 items-start text-gray-500"><div class="mr-2 mb-4">2019-06-20</div><div class="flex flex-nowrap max-w-full overflow-x-auto"></div></nav><div class="znc"><h2>パイプライン演算子</h2>
<p>wat-aro</p>
<hr>
<h3>パイプライン演算子</h3>
<p>こんな感じのやつ</p>
<pre class="language-elm"><code class="language-elm code-highlight"><span class="code-line">  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token operator">|></span> <span class="token hvariable">List.map</span> <span class="token punctuation">(</span>\<span class="token hvariable">x</span> <span class="token operator">-></span> <span class="token hvariable">x</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token operator">|></span> <span class="token hvariable">List.foldl</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h4>パイプライン演算子</h4>
<p><code>|></code> の前の値を関数に適用する</p>
<hr>
<h4>パイプライン演算子</h4>
<ul>
<li>元は Isabela/ML あたりが発祥</li>
<li>F# が採用</li>
<li>OCaml が採用</li>
<li>Elixir が F# から採用</li>
<li>Ruby に入りそう</li>
</ul>
<hr>
<hr>
<h3>ML などにおけるパイプライン演算子のつくりかた</h3>
<p>以下を満たせば簡単につくれる</p>
<ul>
<li>ユーザ定義演算子</li>
<li>デフォルトでカリー化</li>
</ul>
<hr>
<h4>Haskell でのつくり方</h4>
<p>第一引数を第二引数に適用するだけ</p>
<pre class="language-haskell"><code class="language-haskell code-highlight"><span class="code-line"><span class="token punctuation">(</span><span class="token operator">|></span><span class="token punctuation">)</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token hvariable">b</span>
</span><span class="code-line"><span class="token punctuation">(</span><span class="token operator">|></span><span class="token punctuation">)</span> <span class="token hvariable">a</span> <span class="token hvariable">f</span> <span class="token operator">=</span> <span class="token hvariable">f</span> <span class="token hvariable">a</span>
</span></code></pre>
<hr>
<hr>
<h3>カリー化と部分適用</h3>
<p>以降の話に関わるのでここでおさらい</p>
<hr>
<h4>カリー化</h4>
<p>複数の引数を受け取る関数を一引数の関数に変換する</p>
<pre class="language-haskell"><code class="language-haskell code-highlight"><span class="code-line"><span class="token hvariable">uncuffyFunction</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token hvariable">b</span><span class="token punctuation">,</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token hvariable">d</span>
</span><span class="code-line"><span class="token hvariable">uncuffyFunction</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token hvariable">b</span><span class="token punctuation">,</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">somethingToDo</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token hvariable">curriedFunction</span> <span class="token operator">::</span> <span class="token hvariable">a</span> <span class="token operator">-></span> <span class="token hvariable">b</span> <span class="token operator">-></span> <span class="token hvariable">c</span> <span class="token operator">-></span> <span class="token hvariable">d</span>
</span><span class="code-line"><span class="token hvariable">curriedFunction</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span> <span class="token operator">=</span> <span class="token hvariable">somethingToDo</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span>
</span></code></pre>
<hr>
<h4>ES6</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">uncurryFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">somethigTodo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">curriedFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">somethingTodo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>curriedFunction は引数を一つとると残りの引数を <em>一つずつ取る関数</em> を返す
uncurry な関数を curried な関数に変換するのが</p>
<hr>
<h3>部分適用</h3>
<p>複数の引数を取る関数で、一部にだけ引数を適用した状態の関数を返す。</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> partialApplied <span class="token operator">=</span> <span class="token function">somethigTodo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<hr>
<h3>なぜカリー化と部分適用の話を？</h3>
<p>Elixir などのデフォルトでカリー化されていない言語では関数のようにパイプライン演算子を定義できない
e.g.</p>
<ul>
<li>Elixir, Clojure はマクロ</li>
<li>Ruby は言語組み込みの機構</li>
</ul>
<hr>
<hr>
<h3>Elixir のパイプライン演算子</h3>
<p>ML 系は関数の最後の引数に値を差し込む
Elixir は最初の引数を差し込む</p>
<hr>
<h4>Elixir の |></h4>
<pre class="language-elixir"><code class="language-elixir code-highlight"><span class="code-line"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token operator">|></span> <span class="token module class-name">List</span><span class="token punctuation">.</span>flatten
</span><span class="code-line">  <span class="token operator">|></span> <span class="token module class-name">Enum</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">fn</span> x <span class="token operator">-></span> x <span class="token operator">*</span> x <span class="token keyword">end</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token operator">|></span> <span class="token module class-name">Enum</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> acc<span class="token punctuation">)</span> <span class="token operator">-></span> x <span class="token operator">+</span> acc <span class="token keyword">end</span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h4>Elixir の |></h4>
<p>カリー化されていないため AST を変換する必要がある</p>
<hr>
<hr>
<h3>Ruby のパイプライン演算子</h3>
<p>パイプラインといいつつただの優先度の低い <code>.</code></p>
<hr>
<h4>Ruby のパイプライン演算子</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span><span class="token operator">|</span>x<span class="token operator">|</span> x <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token number">1.</span><span class="token number">.5</span> <span class="token operator">|</span><span class="token operator">></span> map <span class="token punctuation">{</span><span class="token operator">|</span>x<span class="token operator">|</span> x <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span>
</span></code></pre>
<p>のように書ける</p>
<hr>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<p><a href="https://twitter.com/hanachin_/status/1139406434846695430"><img src="https://i.gyazo.com/4ecb8454c6bfc9d8470cb6c118129d21.png" alt="Image from Gyazo"></a>()</p>
<p>これの話をしたかった</p>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span></code></pre>
<p><code>.:</code> は Ruby 2.7 で入る演算子。
Method オブジェクトを取り出す。
Method オブジェクトはほぼ Proc オブジェクトと同じふるまい。
詳しくはドキュメントを読んでください。</p>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span></code></pre>
<p><code>URI.parse</code> でなく <code>URI.:parse</code> に注意。
とりだした Method オブジェクトを <code>|></code> と <code>>></code> で合成する。
<code>>></code> は Ruby2.6 で入った関数(Proc)合成演算子。
<code>URI.:parse</code> で <code>URI.parse</code> の Method オブジェクトを取りだし、
<code>>></code> によって合成している。
つまり</p>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token constant">URI</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span><span class="token symbol">:get</span>
</span></code></pre>
<p><code>Net::HTTP.:get</code> で <code>Net:HTTP.get</code> の Method オブジェクトを取り出す。</p>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line">uri <span class="token operator">=</span> <span class="token constant">URI</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">)</span>
</span><span class="code-line">Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span>uri<span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span><span class="token symbol">:get</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span></code></pre>
<p>ここでも <code>JSON.:parse</code> で <code>JSON.parse</code> で Method オブジェクトを取り出す</p>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line">uri <span class="token operator">=</span> <span class="token constant">URI</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">)</span>
</span><span class="code-line">response <span class="token operator">=</span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span>uri<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span>response<span class="token punctuation">)</span>
</span></code></pre>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span><span class="token symbol">:get</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> call
</span></code></pre>
<p>今までは Method オブジェクトを合成しただけなので、ここでやっと評価され、値になる。</p>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span><span class="token symbol">:get</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> call
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> fetch<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"stargazers_count"</span></span><span class="token punctuation">)</span>
</span></code></pre>
<p><code>Hash#fetch</code> で値を取りだす</p>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"https://api.github.com/repos/ruby/ruby "</span></span><span class="token punctuation">.</span><span class="token symbol">:itself</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> Net<span class="token double-colon punctuation">::</span><span class="token constant">HTTP</span><span class="token punctuation">.</span><span class="token symbol">:get</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">>></span><span class="token operator">></span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token symbol">:parse</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> call
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> fetch<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"stargazers_count"</span></span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token operator">|</span><span class="token operator">></span> <span class="token keyword">then</span> <span class="token punctuation">{</span> puts @<span class="token number">1</span> <span class="token punctuation">}</span>
</span></code></pre>
<p>そして標準出力へ。
<code>@1</code> は Ruby2.7 で入る予定。</p>
<pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line"><span class="token string-literal"><span class="token string">"hoge"</span></span><span class="token punctuation">.</span><span class="token keyword">then</span> <span class="token punctuation">{</span> puts @<span class="token number">1</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token string-literal"><span class="token string">"hoge"</span></span><span class="token punctuation">.</span><span class="token keyword">then</span> <span class="token punctuation">{</span><span class="token operator">|</span>s<span class="token operator">|</span> puts s <span class="token punctuation">}</span>
</span></code></pre>
<hr>
<h4>Ruby のパイプライン演算子における応用</h4>
<p>たーのしー</p>
<hr>
<hr>
<h3>まとめ</h3>
<p>パイプライン演算子の説明
Ruby2.7 で入る予定のパイプライン演算子とその応用の紹介
関数合成をキメていこう</p>
<hr>
<h4>悲しみ</h4>
<p><a href="https://twitter.com/hanachin_/status/1139406434846695430"><img src="https://i.gyazo.com/47e87c4f7f7ad60bb2f657b4ebbf431b.png" alt="Image from Gyazo"></a></p>
<hr>
<p>もっと詳しく知りたい人は</p>
<p><a href="https://mametter.hatenablog.com/entry/2019/06/15/192311">パイプライン演算子の歴史 - まめめも</a>
<a href="https://qiita.com/cedretaber/items/6a3831367439f64756ab">第一引数版パイプライン演算子 - Qiita @cedretaber</a></p></div></div></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"パイプライン演算子","published":"2019-06-20","content":"\u003ch2\u003eパイプライン演算子\u003c/h2\u003e\n\u003cp\u003ewat-aro\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eパイプライン演算子\u003c/h3\u003e\n\u003cp\u003eこんな感じのやつ\u003c/p\u003e\n\u003cpre class=\"language-elm\"\u003e\u003ccode class=\"language-elm code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eList.map\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\\\u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eList.foldl\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eパイプライン演算子\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003e|\u003e\u003c/code\u003e の前の値を関数に適用する\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eパイプライン演算子\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e元は Isabela/ML あたりが発祥\u003c/li\u003e\n\u003cli\u003eF# が採用\u003c/li\u003e\n\u003cli\u003eOCaml が採用\u003c/li\u003e\n\u003cli\u003eElixir が F# から採用\u003c/li\u003e\n\u003cli\u003eRuby に入りそう\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch3\u003eML などにおけるパイプライン演算子のつくりかた\u003c/h3\u003e\n\u003cp\u003e以下を満たせば簡単につくれる\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eユーザ定義演算子\u003c/li\u003e\n\u003cli\u003eデフォルトでカリー化\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch4\u003eHaskell でのつくり方\u003c/h4\u003e\n\u003cp\u003e第一引数を第二引数に適用するだけ\u003c/p\u003e\n\u003cpre class=\"language-haskell\"\u003e\u003ccode class=\"language-haskell code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e::\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ef\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch3\u003eカリー化と部分適用\u003c/h3\u003e\n\u003cp\u003e以降の話に関わるのでここでおさらい\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eカリー化\u003c/h4\u003e\n\u003cp\u003e複数の引数を受け取る関数を一引数の関数に変換する\u003c/p\u003e\n\u003cpre class=\"language-haskell\"\u003e\u003ccode class=\"language-haskell code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003euncuffyFunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e::\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ed\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003euncuffyFunction\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003esomethingToDo\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003ecurriedFunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e::\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ed\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token hvariable\"\u003ecurriedFunction\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003esomethingToDo\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ea\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003eb\u003c/span\u003e \u003cspan class=\"token hvariable\"\u003ec\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eES6\u003c/h4\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003euncurryFunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e c\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003esomethigTodo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e c\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003ecurriedFunction\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003esomethingTodo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e b\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e c\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ecurriedFunction は引数を一つとると残りの引数を \u003cem\u003e一つずつ取る関数\u003c/em\u003e を返す\nuncurry な関数を curried な関数に変換するのが\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e部分適用\u003c/h3\u003e\n\u003cp\u003e複数の引数を取る関数で、一部にだけ引数を適用した状態の関数を返す。\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e partialApplied \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003esomethigTodo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eなぜカリー化と部分適用の話を？\u003c/h3\u003e\n\u003cp\u003eElixir などのデフォルトでカリー化されていない言語では関数のようにパイプライン演算子を定義できない\ne.g.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eElixir, Clojure はマクロ\u003c/li\u003e\n\u003cli\u003eRuby は言語組み込みの機構\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch3\u003eElixir のパイプライン演算子\u003c/h3\u003e\n\u003cp\u003eML 系は関数の最後の引数に値を差し込む\nElixir は最初の引数を差し込む\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eElixir の |\u003e\u003c/h4\u003e\n\u003cpre class=\"language-elixir\"\u003e\u003ccode class=\"language-elixir code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e \u003cspan class=\"token module class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eflatten\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e \u003cspan class=\"token module class-name\"\u003eEnum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e x \u003cspan class=\"token keyword\"\u003eend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003e\u003c/span\u003e \u003cspan class=\"token module class-name\"\u003eEnum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereduce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003efn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e acc\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e acc \u003cspan class=\"token keyword\"\u003eend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eElixir の |\u003e\u003c/h4\u003e\n\u003cp\u003eカリー化されていないため AST を変換する必要がある\u003c/p\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch3\u003eRuby のパイプライン演算子\u003c/h3\u003e\n\u003cp\u003eパイプラインといいつつただの優先度の低い \u003ccode\u003e.\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1.\u003c/span\u003e\u003cspan class=\"token number\"\u003e.5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emap \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003ex\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token number\"\u003e1.\u003c/span\u003e\u003cspan class=\"token number\"\u003e.5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e map \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003ex\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e x \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eのように書ける\u003c/p\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://twitter.com/hanachin_/status/1139406434846695430\"\u003e\u003cimg src=\"https://i.gyazo.com/4ecb8454c6bfc9d8470cb6c118129d21.png\" alt=\"Image from Gyazo\"\u003e\u003c/a\u003e()\u003c/p\u003e\n\u003cp\u003eこれの話をしたかった\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e.:\u003c/code\u003e は Ruby 2.7 で入る演算子。\nMethod オブジェクトを取り出す。\nMethod オブジェクトはほぼ Proc オブジェクトと同じふるまい。\n詳しくはドキュメントを読んでください。\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eURI.parse\u003c/code\u003e でなく \u003ccode\u003eURI.:parse\u003c/code\u003e に注意。\nとりだした Method オブジェクトを \u003ccode\u003e|\u003e\u003c/code\u003e と \u003ccode\u003e\u003e\u003e\u003c/code\u003e で合成する。\n\u003ccode\u003e\u003e\u003e\u003c/code\u003e は Ruby2.6 で入った関数(Proc)合成演算子。\n\u003ccode\u003eURI.:parse\u003c/code\u003e で \u003ccode\u003eURI.parse\u003c/code\u003e の Method オブジェクトを取りだし、\n\u003ccode\u003e\u003e\u003e\u003c/code\u003e によって合成している。\nつまり\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:get\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eNet::HTTP.:get\u003c/code\u003e で \u003ccode\u003eNet:HTTP.get\u003c/code\u003e の Method オブジェクトを取り出す。\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003euri \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eNet\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euri\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:get\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eここでも \u003ccode\u003eJSON.:parse\u003c/code\u003e で \u003ccode\u003eJSON.parse\u003c/code\u003e で Method オブジェクトを取り出す\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003euri \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eresponse \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euri\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponse\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:get\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e call\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e今までは Method オブジェクトを合成しただけなので、ここでやっと評価され、値になる。\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:get\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e call\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e fetch\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"stargazers_count\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eHash#fetch\u003c/code\u003e で値を取りだす\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"https://api.github.com/repos/ruby/ruby \"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:itself\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eURI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Net\u003cspan class=\"token double-colon punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token constant\"\u003eHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:get\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token symbol\"\u003e:parse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e call\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e fetch\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"stargazers_count\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e puts @\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eそして標準出力へ。\n\u003ccode\u003e@1\u003c/code\u003e は Ruby2.7 で入る予定。\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"hoge\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e puts @\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"hoge\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethen\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token operator\"\u003e|\u003c/span\u003es\u003cspan class=\"token operator\"\u003e|\u003c/span\u003e puts s \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch4\u003eRuby のパイプライン演算子における応用\u003c/h4\u003e\n\u003cp\u003eたーのしー\u003c/p\u003e\n\u003chr\u003e\n\u003chr\u003e\n\u003ch3\u003eまとめ\u003c/h3\u003e\n\u003cp\u003eパイプライン演算子の説明\nRuby2.7 で入る予定のパイプライン演算子とその応用の紹介\n関数合成をキメていこう\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003e悲しみ\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://twitter.com/hanachin_/status/1139406434846695430\"\u003e\u003cimg src=\"https://i.gyazo.com/47e87c4f7f7ad60bb2f657b4ebbf431b.png\" alt=\"Image from Gyazo\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eもっと詳しく知りたい人は\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mametter.hatenablog.com/entry/2019/06/15/192311\"\u003eパイプライン演算子の歴史 - まめめも\u003c/a\u003e\n\u003ca href=\"https://qiita.com/cedretaber/items/6a3831367439f64756ab\"\u003e第一引数版パイプライン演算子 - Qiita @cedretaber\u003c/a\u003e\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"pipeline-operator"},"buildId":"DeXoNIWtvmHXdkEEAH84G","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
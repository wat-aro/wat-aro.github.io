<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Scheme修行のtryについて | (wat-aro)</title><meta name="title" content="Scheme修行のtryについて | (wat-aro)"/><meta name="description" content="&lt;p&gt;&lt;div class=&quot;hatena-asin-detail&quot;&gt;&lt;a href=&quot;http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/&quot;&gt;&lt;img src=&quot;http://ecx.images-amazon.com/images/I/41t9"/><meta property="og:locale" content="ja_jp"/><meta property="og:type" content="article"/><meta property="og:site_name" content="(wat-aro)"/><meta property="og:title" content="Scheme修行のtryについて | (wat-aro)"/><meta property="og:image" content="https://wat-aro.dev/og-images/Scheme修行のtryについて.png"/><meta property="og:url" content="https://wat-aro.dev/posts/Scheme%E4%BF%AE%E8%A1%8C%E3%81%AEtry%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@wat_aro"/><meta name="twitter:creator" content="@wat_aro"/><meta name="twitter:title" content="Scheme修行のtryについて | (wat-aro)"/><meta name="twitter:description" content="&lt;p&gt;&lt;div class=&quot;hatena-asin-detail&quot;&gt;&lt;a href=&quot;http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/&quot;&gt;&lt;img src=&quot;http://ecx.images-amazon.com/images/I/41t9"/><meta name="twitter:image" content="https://wat-aro.dev/og-images/Scheme修行のtryについて.png"/><meta name="next-head-count" content="17"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/efce62830f77489e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/efce62830f77489e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d19aa426007499ce.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-0e1c4012a86ba0a9.js" defer=""></script><script src="/_next/static/diwZ4NE9jtzL3PG5QwdEW/_buildManifest.js" defer=""></script><script src="/_next/static/diwZ4NE9jtzL3PG5QwdEW/_ssgManifest.js" defer=""></script><script src="/_next/static/diwZ4NE9jtzL3PG5QwdEW/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW6D56L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="py-0 md:px-8 min-h-screen flex flex-col items-center"><div class="top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><a href="/"><div class="flex items-center font-midium text-3xl h-full font-bold gap-4"><img class="rounded-full" src="/images/profile.jpg" width="48" height="48" alt="profile image"/>(wat-aro)<!-- --></div></a><ul class="flex gap-3 h-full"><li class="h-full  flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li><li class="h-full  flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts">Blog</a></li></ul></div><div class="flex md:justify-center justify-between w-full"><div class="flex flex-col sm:max-w-sm md:max-w-4xl w-full py-4 px-4"><article class="flex max-w-4xl w-full"><div class="py-4 w-full"><div class="mr-2 text-xs font-bold">2016/06/04</div><h1 class="font-bold text-3xl text-black">Scheme修行のtryについて</h1><nav class="flex mt-2 mb-2 items-start text-gray-500 text-xs"><div class="flex flex-nowrap max-w-full overflow-x-auto"><p class="mr-1 rounded-full px-2 py-1 border leading-none">gauche</p><p class="mr-1 rounded-full px-2 py-1 border leading-none">scheme</p></div></nav><div class="znc"><p></p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/"><img src="http://ecx.images-amazon.com/images/I/41t9gbUu52L._SL160_.jpg" class="hatena-asin-detail-image" alt="Scheme修行" title="Scheme修行"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/">Scheme修行</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Daniel P. Friedman and Matthias Felleisen,元吉文男,横山晶一</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%E0%BC%D2">オーム社</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2011/06/15</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><span class="hatena-asin-detail-label">購入</span>: 3人 <span class="hatena-asin-detail-label">クリック</span>: 46回</li><li><a href="http://d.hatena.ne.jp/asin/4274068536/wataro-22" target="_blank">この商品を含むブログ (10件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div><p></p>
<p>p89の欄外で補足されているtryについて．<br>
これが出てきたのは <code>rember1*</code> の実装の中です．<br>
<code>rember1*</code> は<a class="keyword" href="http://d.hatena.ne.jp/keyword/atom">atom</a> aとリストlを引数に取ります． <br>
lの中で最初に出てきたaと同じアトムを削除して新しいリストを返す手続きです．</p>
<p>tryを使う前の実装は以下になります．</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> rember1*
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synStatement">lambda</span> <span class="synSpecial">(</span>a l<span class="synSpecial">)</span>
</span><span class="code-line">    <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span>atom? <span class="synSpecial">(</span>let/cc oh <span class="synSpecial">(</span>rm a l oh<span class="synSpecial">)))</span>
</span><span class="code-line">        l
</span><span class="code-line">        <span class="synSpecial">(</span>rm a l <span class="synSpecial">(</span><span class="synStatement">quote</span> <span class="synSpecial">())))))</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> rm
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synStatement">lambda</span> <span class="synSpecial">(</span>a l oh<span class="synSpecial">)</span>
</span><span class="code-line">    <span class="synSpecial">(</span><span class="synStatement">cond</span>
</span><span class="code-line">     <span class="synSpecial">((</span><span class="synIdentifier">null?</span> l<span class="synSpecial">)</span> <span class="synSpecial">(</span>oh <span class="synSpecial">(</span><span class="synStatement">quote</span> no<span class="synSpecial">)))</span>
</span><span class="code-line">     <span class="synSpecial">((</span>atom? <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">))</span>
</span><span class="code-line">      <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">eq?</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span> a<span class="synSpecial">)</span>
</span><span class="code-line">          <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span>
</span><span class="code-line">          <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span>
</span><span class="code-line">                <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span> oh<span class="synSpecial">))))</span>
</span><span class="code-line">     <span class="synSpecial">(</span><span class="synStatement">else</span>
</span><span class="code-line">      <span class="synSpecial">(</span><span class="synStatement">let</span> <span class="synSpecial">((</span>new-car
</span><span class="code-line">             <span class="synSpecial">(</span>let/cc oh
</span><span class="code-line">               <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span> oh<span class="synSpecial">))))</span>
</span><span class="code-line">        <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span>atom? new-car<span class="synSpecial">)</span>
</span><span class="code-line">            <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span>
</span><span class="code-line">                  <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span> oh<span class="synSpecial">))</span>
</span><span class="code-line">            <span class="synSpecial">(</span><span class="synIdentifier">cons</span> new-car <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">))))))))</span>
</span></code></pre>
<p>リストの中で最後まで探し終わってlがnullになれば継続に<code>(quote no)</code>を渡します．<br>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/atom">atom</a>であればcarにリストはないのでcdrを探します．
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BA%C6%B5%A2">再帰</a>的に探して，aと同じものがあれば，それを取り除いた残りのリストを返します．<br>
取り除くのは最初に見つかったものだけです．<br>
このコードをtryを使うとこうなります．</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> rember1*
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synStatement">lambda</span> <span class="synSpecial">(</span>a l<span class="synSpecial">)</span>
</span><span class="code-line">    <span class="synSpecial">(</span>try oh <span class="synSpecial">(</span>rm a l oh<span class="synSpecial">)</span> l<span class="synSpecial">)))</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> rm
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synStatement">lambda</span> <span class="synSpecial">(</span>a l oh<span class="synSpecial">)</span>
</span><span class="code-line">    <span class="synSpecial">(</span><span class="synStatement">cond</span>
</span><span class="code-line">     <span class="synSpecial">((</span><span class="synIdentifier">null?</span> l<span class="synSpecial">)</span> <span class="synSpecial">(</span>oh <span class="synSpecial">(</span><span class="synStatement">quote</span> no<span class="synSpecial">)))</span>
</span><span class="code-line">     <span class="synSpecial">((</span>atom? <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">))</span>
</span><span class="code-line">      <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">eq?</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span> a<span class="synSpecial">)</span>
</span><span class="code-line">          <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span>
</span><span class="code-line">          <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span>
</span><span class="code-line">                <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span> oh<span class="synSpecial">))))</span>
</span><span class="code-line">     <span class="synSpecial">(</span><span class="synStatement">else</span>
</span><span class="code-line">      <span class="synSpecial">(</span>try oh2
</span><span class="code-line">           <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span> oh2<span class="synSpecial">)</span>
</span><span class="code-line">                 <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">))</span>
</span><span class="code-line">           <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> l<span class="synSpecial">)</span>
</span><span class="code-line">                 <span class="synSpecial">(</span>rm a <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> l<span class="synSpecial">)</span> oh<span class="synSpecial">)))))))</span>
</span></code></pre>
<p>tryについてはここでページ欄外に</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span>try x <span class="synError">α</span> <span class="synError">β</span><span class="synSpecial">)</span>
</span><span class="code-line"><span class="synIdentifier">=</span>
</span><span class="code-line"><span class="synSpecial">(</span>let/cc success
</span><span class="code-line">  <span class="synSpecial">(</span>let/cc x
</span><span class="code-line">    <span class="synSpecial">(</span>success a<span class="synSpecial">))</span>
</span><span class="code-line">  b<span class="synSpecial">)</span>
</span></code></pre>
<p>と書かれています．<br>
ここがなかなかわかりませんでした．</p>
<p>まず中のlet/ccから考えます．</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span>let/cc x
</span><span class="code-line">  <span class="synSpecial">(</span>success <span class="synError">α</span><span class="synSpecial">))</span>
</span></code></pre>
<p>α内で継続xが使われているはずです．<br>
継続xに値γが渡されると，<code>(let/cc x γ)</code>となり，次の計算βに進みます．</p>
<p>継続xに値が渡されない場合はαの値が継続successに渡され，そこで計算が終了しこの式の値はαとなります．<br>
つまり，tryはα内で継続xに値が渡されればβの値が返り，<br>
渡されなければαの値が返るわけです．<br>
元の式で継続に値が渡されたのを判別するために<code>(quote no)</code>を継続に渡して<a class="keyword" href="http://d.hatena.ne.jp/keyword/atom">atom</a>?で判別していたものを<br>
継続が返ってくるかこないかで判別できるようになっています．</p>
<p>継続難しいです．<br>
でも<a class="keyword" href="http://d.hatena.ne.jp/keyword/Scheme">Scheme</a>修行で少しずつわかってきた気がします．</p></div></div></article></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Scheme修行のtryについて","published":"2016/06/04","tags":["gauche","scheme"],"content":"\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/\"\u003e\u003cimg src=\"http://ecx.images-amazon.com/images/I/41t9gbUu52L._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Scheme修行\" title=\"Scheme修行\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/\"\u003eScheme修行\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Daniel P. Friedman and Matthias Felleisen,元吉文男,横山晶一\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%E0%BC%D2\"\u003eオーム社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2011/06/15\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 3人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 46回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4274068536/wataro-22\" target=\"_blank\"\u003eこの商品を含むブログ (10件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\n\u003cp\u003ep89の欄外で補足されているtryについて．\u003cbr\u003e\nこれが出てきたのは \u003ccode\u003erember1*\u003c/code\u003e の実装の中です．\u003cbr\u003e\n\u003ccode\u003erember1*\u003c/code\u003e は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003e aとリストlを引数に取ります． \u003cbr\u003e\nlの中で最初に出てきたaと同じアトムを削除して新しいリストを返す手続きです．\u003c/p\u003e\n\u003cp\u003etryを使う前の実装は以下になります．\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rember1*\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc oh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l oh\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        l\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e())))))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rm\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003econd\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eoh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e no\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eeq?\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e a\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elet\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003enew-car\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e             \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc oh\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e               \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eatom? new-car\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e new-car \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))))))))\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eリストの中で最後まで探し終わってlがnullになれば継続に\u003ccode\u003e(quote no)\u003c/code\u003eを渡します．\u003cbr\u003e\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003eであればcarにリストはないのでcdrを探します．\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BA%C6%B5%A2\"\u003e再帰\u003c/a\u003e的に探して，aと同じものがあれば，それを取り除いた残りのリストを返します．\u003cbr\u003e\n取り除くのは最初に見つかったものだけです．\u003cbr\u003e\nこのコードをtryを使うとこうなります．\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rember1*\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry oh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rm\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003econd\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eoh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e no\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eeq?\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e a\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry oh2\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e           \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh2\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                 \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e           \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                 \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e)))))))\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etryについてはここでページ欄外に\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry x \u003cspan class=\"synError\"\u003eα\u003c/span\u003e \u003cspan class=\"synError\"\u003eβ\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synIdentifier\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc success\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc x\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esuccess a\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  b\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eと書かれています．\u003cbr\u003e\nここがなかなかわかりませんでした．\u003c/p\u003e\n\u003cp\u003eまず中のlet/ccから考えます．\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc x\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esuccess \u003cspan class=\"synError\"\u003eα\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eα内で継続xが使われているはずです．\u003cbr\u003e\n継続xに値γが渡されると，\u003ccode\u003e(let/cc x γ)\u003c/code\u003eとなり，次の計算βに進みます．\u003c/p\u003e\n\u003cp\u003e継続xに値が渡されない場合はαの値が継続successに渡され，そこで計算が終了しこの式の値はαとなります．\u003cbr\u003e\nつまり，tryはα内で継続xに値が渡されればβの値が返り，\u003cbr\u003e\n渡されなければαの値が返るわけです．\u003cbr\u003e\n元の式で継続に値が渡されたのを判別するために\u003ccode\u003e(quote no)\u003c/code\u003eを継続に渡して\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003e?で判別していたものを\u003cbr\u003e\n継続が返ってくるかこないかで判別できるようになっています．\u003c/p\u003e\n\u003cp\u003e継続難しいです．\u003cbr\u003e\nでも\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Scheme\"\u003eScheme\u003c/a\u003e修行で少しずつわかってきた気がします．\u003c/p\u003e","slug":"Scheme修行のtryについて","rawContent":"\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/\"\u003e\u003cimg src=\"http://ecx.images-amazon.com/images/I/41t9gbUu52L._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Scheme修行\" title=\"Scheme修行\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4274068536/wataro-22/\"\u003eScheme修行\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Daniel P. Friedman and Matthias Felleisen,元吉文男,横山晶一\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%E0%BC%D2\"\u003eオーム社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2011/06/15\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 3人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 46回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4274068536/wataro-22\" target=\"_blank\"\u003eこの商品を含むブログ (10件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003ep89の欄外で補足されているtryについて．\u003cbr/\u003e\nこれが出てきたのは \u003ccode\u003erember1*\u003c/code\u003e の実装の中です．\u003cbr/\u003e\n\u003ccode\u003erember1*\u003c/code\u003e は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003e aとリストlを引数に取ります． \u003cbr/\u003e\nlの中で最初に出てきたaと同じアトムを削除して新しいリストを返す手続きです．\u003c/p\u003e\n\n\u003cp\u003etryを使う前の実装は以下になります．\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rember1*\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc oh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l oh\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n        l\n        \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e())))))\u003c/span\u003e\n\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rm\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003econd\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eoh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e no\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eeq?\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e a\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elet\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003enew-car\n             \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc oh\n               \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n        \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eatom? new-car\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n                  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e new-car \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))))))))\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eリストの中で最後まで探し終わってlがnullになれば継続に\u003ccode\u003e(quote no)\u003c/code\u003eを渡します．\u003cbr/\u003e\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003eであればcarにリストはないのでcdrを探します．\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BA%C6%B5%A2\"\u003e再帰\u003c/a\u003e的に探して，aと同じものがあれば，それを取り除いた残りのリストを返します．\u003cbr/\u003e\n取り除くのは最初に見つかったものだけです．\u003cbr/\u003e\nこのコードをtryを使うとこうなります．\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rember1*\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry oh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e rm\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003elambda\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ea l oh\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003econd\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eoh \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003equote\u003c/span\u003e no\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e((\u003c/span\u003eatom? \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eeq?\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e a\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n     \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry oh2\n           \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh2\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n                 \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n           \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n                 \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erm a \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e l\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e oh\u003cspan class=\"synSpecial\"\u003e)))))))\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003etryについてはここでページ欄外に\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etry x \u003cspan class=\"synError\"\u003eα\u003c/span\u003e \u003cspan class=\"synError\"\u003eβ\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e=\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc success\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc x\n    \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esuccess a\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n  b\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eと書かれています．\u003cbr/\u003e\nここがなかなかわかりませんでした．\u003c/p\u003e\n\n\u003cp\u003eまず中のlet/ccから考えます．\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elet/cc x\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esuccess \u003cspan class=\"synError\"\u003eα\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eα内で継続xが使われているはずです．\u003cbr/\u003e\n継続xに値γが渡されると，\u003ccode\u003e(let/cc x γ)\u003c/code\u003eとなり，次の計算βに進みます．\u003c/p\u003e\n\n\u003cp\u003e継続xに値が渡されない場合はαの値が継続successに渡され，そこで計算が終了しこの式の値はαとなります．\u003cbr/\u003e\nつまり，tryはα内で継続xに値が渡されればβの値が返り，\u003cbr/\u003e\n渡されなければαの値が返るわけです．\u003cbr/\u003e\n元の式で継続に値が渡されたのを判別するために\u003ccode\u003e(quote no)\u003c/code\u003eを継続に渡して\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/atom\"\u003eatom\u003c/a\u003e?で判別していたものを\u003cbr/\u003e\n継続が返ってくるかこないかで判別できるようになっています．\u003c/p\u003e\n\n\u003cp\u003e継続難しいです．\u003cbr/\u003e\nでも\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Scheme\"\u003eScheme\u003c/a\u003e修行で少しずつわかってきた気がします．\u003c/p\u003e\n\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"Scheme修行のtryについて"},"buildId":"diwZ4NE9jtzL3PG5QwdEW","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>SICP 問題 5.22 | (wat-aro)</title><meta name="title" content="SICP 問題 5.22 | (wat-aro)"/><meta name="description" content="&lt;p&gt;appendとappend!を&lt;a class=&quot;keyword&quot; href=&quot;http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%BF&quot;&gt;レジスタ&lt;/a&gt;マシン上に実装する．&lt;br/&gt;　&lt;br/&gt;append&lt;/p&gt;&lt;pre class=&quot;code lang-"/><meta property="og:locale" content="ja_jp"/><meta property="og:type" content="article"/><meta property="og:site_name" content="(wat-aro)"/><meta property="og:title" content="SICP 問題 5.22 | (wat-aro)"/><meta property="og:image" content="https://wat-aro.dev/og-images/SICP 問題 5.22.png"/><meta property="og:url" content="https://wat-aro.dev/posts/SICP%20%E5%95%8F%E9%A1%8C%205.22"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@wat_aro"/><meta name="twitter:creator" content="@wat_aro"/><meta name="twitter:title" content="SICP 問題 5.22 | (wat-aro)"/><meta name="twitter:description" content="&lt;p&gt;appendとappend!を&lt;a class=&quot;keyword&quot; href=&quot;http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%BF&quot;&gt;レジスタ&lt;/a&gt;マシン上に実装する．&lt;br/&gt;　&lt;br/&gt;append&lt;/p&gt;&lt;pre class=&quot;code lang-"/><meta name="twitter:image" content="https://wat-aro.dev/og-images/SICP 問題 5.22.png"/><meta name="next-head-count" content="17"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/7c83ce157486acf1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7c83ce157486acf1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f557e2d34bba2226.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-ea8a74e177d104de.js" defer=""></script><script src="/_next/static/SXcjlEmjiVUOhB_fdC10N/_buildManifest.js" defer=""></script><script src="/_next/static/SXcjlEmjiVUOhB_fdC10N/_ssgManifest.js" defer=""></script><script src="/_next/static/SXcjlEmjiVUOhB_fdC10N/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW6D56L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="py-0 md:px-8 min-h-screen flex flex-col items-center"><div class="top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><a href="/"><div class="flex items-center font-midium text-3xl h-full font-bold gap-4"><img class="rounded-full" src="/images/profile.jpg" width="48" height="48" alt="profile image"/>(wat-aro)<!-- --></div></a><ul class="flex gap-3 h-full"><li class="h-full  flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li><li class="h-full  flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts/pages/1">Blog</a></li></ul></div><div class="flex md:justify-center justify-between w-full"><div class="flex flex-col sm:max-w-sm md:max-w-4xl w-full py-4 px-4"><article class="flex max-w-4xl w-full"><div class="py-4 w-full"><div class="mr-2 text-xs font-bold">2016/01/31</div><h1 class="font-bold text-3xl text-black">SICP 問題 5.22</h1><nav class="flex mt-2 mb-2 items-start text-gray-500 text-xs"><div class="flex flex-nowrap max-w-full overflow-x-auto"><p class="mr-1 rounded-full px-2 py-1 border leading-none">scheme</p><p class="mr-1 rounded-full px-2 py-1 border leading-none">SICP</p></div></nav><div class="znc"><p>appendとappend!を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%BF">レジスタ</a>マシン上に実装する．<br>
　<br>
append</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span><span class="synIdentifier">append</span> x y<span class="synSpecial">)</span>
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">null?</span> x<span class="synSpecial">)</span>
</span><span class="code-line">      y
</span><span class="code-line">      <span class="synSpecial">(</span><span class="synIdentifier">cons</span> <span class="synSpecial">(</span><span class="synIdentifier">car</span> x<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">append</span> <span class="synSpecial">(</span><span class="synIdentifier">cdr</span> x<span class="synSpecial">)</span> y<span class="synSpecial">))))</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synIdentifier">append</span>
</span><span class="code-line">  <span class="synSpecial">(</span>make-machine
</span><span class="code-line">   <span class="synSpecial">'(</span>x y val continue<span class="synSpecial">)</span>
</span><span class="code-line">   <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>cons <span class="synIdentifier">cons</span><span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>null? <span class="synIdentifier">null?</span><span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>car <span class="synIdentifier">car</span><span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>cdr <span class="synIdentifier">cdr</span><span class="synSpecial">))</span>
</span><span class="code-line">   <span class="synSpecial">'(</span>start
</span><span class="code-line">       <span class="synSpecial">(</span>assign continue <span class="synSpecial">(</span>label append-done<span class="synSpecial">))</span>
</span><span class="code-line">     x-loop
</span><span class="code-line">       <span class="synSpecial">(</span>test <span class="synSpecial">(</span>op null?<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg x<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>branch <span class="synSpecial">(</span>label after-x<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>save x<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>assign x <span class="synSpecial">(</span>op cdr<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg x<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>save continue<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>assign continue <span class="synSpecial">(</span>label construct<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>goto <span class="synSpecial">(</span>label x-loop<span class="synSpecial">))</span>
</span><span class="code-line">     after-x
</span><span class="code-line">       <span class="synSpecial">(</span>assign val <span class="synSpecial">(</span>reg y<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>goto <span class="synSpecial">(</span>label construct<span class="synSpecial">))</span>
</span><span class="code-line">     construct
</span><span class="code-line">       <span class="synSpecial">(</span>restore continue<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>restore x<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>assign x <span class="synSpecial">(</span>op car<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg x<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>assign val <span class="synSpecial">(</span>op cons<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg x<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg val<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>goto <span class="synSpecial">(</span>reg continue<span class="synSpecial">))</span>
</span><span class="code-line">     append-done<span class="synSpecial">)))</span>
</span></code></pre>
<p>test</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line">gosh> <span class="synSpecial">(</span>set-register-contents! <span class="synIdentifier">append</span> <span class="synSpecial">'</span>x <span class="synSpecial">'(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span><span class="synSpecial">))</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>set-register-contents! <span class="synIdentifier">append</span> <span class="synSpecial">'</span>y <span class="synSpecial">'(</span>a b c<span class="synSpecial">))</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>start <span class="synIdentifier">append</span><span class="synSpecial">)</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>get-register-contents <span class="synIdentifier">append</span> <span class="synSpecial">'</span>val<span class="synSpecial">)</span>
</span><span class="code-line"><span class="synSpecial">(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span> a b c<span class="synSpecial">)</span>
</span></code></pre>
<p>　<br>
append!</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span>append! x y<span class="synSpecial">)</span>
</span><span class="code-line">  <span class="synSpecial">(</span><span class="synIdentifier">set-cdr!</span> <span class="synSpecial">(</span>last-pair x<span class="synSpecial">)</span> y<span class="synSpecial">)</span>
</span><span class="code-line">  x<span class="synSpecial">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synSpecial">(</span><span class="synStatement">define</span> append!
</span><span class="code-line">  <span class="synSpecial">(</span>make-machine
</span><span class="code-line">   <span class="synSpecial">'(</span>x y temp<span class="synSpecial">)</span>
</span><span class="code-line">   <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>set-cdr! <span class="synIdentifier">set-cdr!</span><span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>cdr <span class="synIdentifier">cdr</span><span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">list</span> <span class="synSpecial">'</span>null? <span class="synIdentifier">null?</span><span class="synSpecial">))</span>
</span><span class="code-line">   <span class="synSpecial">'(</span>start
</span><span class="code-line">       <span class="synSpecial">(</span>assign temp <span class="synSpecial">(</span>reg x<span class="synSpecial">))</span>
</span><span class="code-line">     x-loop
</span><span class="code-line">       <span class="synSpecial">(</span>test <span class="synSpecial">(</span>op null?<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg temp<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>branch <span class="synSpecial">(</span>label after-loop<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>save temp<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>assign temp <span class="synSpecial">(</span>op cdr<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg temp<span class="synSpecial">))</span>
</span><span class="code-line">       <span class="synSpecial">(</span>goto <span class="synSpecial">(</span>label x-loop<span class="synSpecial">))</span>
</span><span class="code-line">     after-loop
</span><span class="code-line">       <span class="synSpecial">(</span>restore temp<span class="synSpecial">)</span>
</span><span class="code-line">       <span class="synSpecial">(</span>perform <span class="synSpecial">(</span>op set-cdr!<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg temp<span class="synSpecial">)</span> <span class="synSpecial">(</span>reg y<span class="synSpecial">))</span>
</span><span class="code-line">     append!-done <span class="synSpecial">)))</span>
</span></code></pre>
<p>test</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink=""><code class="code-highlight"><span class="code-line">gosh> <span class="synSpecial">(</span>set-register-contents! append! <span class="synSpecial">'</span>x <span class="synSpecial">'(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span><span class="synSpecial">))</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>set-register-contents! append! <span class="synSpecial">'</span>y <span class="synSpecial">'(</span>a b c<span class="synSpecial">))</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>start append!<span class="synSpecial">)</span>
</span><span class="code-line">done
</span><span class="code-line">gosh> <span class="synSpecial">(</span>get-register-contents append! <span class="synSpecial">'</span>x<span class="synSpecial">)</span>
</span><span class="code-line"><span class="synSpecial">(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span> a b c<span class="synSpecial">)</span>
</span></code></pre></div></div></article></div></div><div class="flex md:justify-center w-full"><div class="flex flex-col md:max-w-4xl w-full"><hr/><div class="flex justify-center pt-4 pb-8">© 2022 wat-aro</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"data":{"title":"SICP 問題 5.22","published":"2016/01/31","tags":["scheme","SICP"]},"content":"\n\u003cp\u003eappendとappend!を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%BF\"\u003eレジスタ\u003c/a\u003eマシン上に実装する．\u003cbr/\u003e\n　\u003cbr/\u003e\nappend\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e x y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n      y\n      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e y\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003emake-machine\n   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ex y val continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n   \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003econs \u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003enull? \u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecar \u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecdr \u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003estart\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign continue \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel append-done\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     x-loop\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etest \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop null?\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ebranch \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel after-x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign x \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cdr\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign continue \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel construct\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel x-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     after-x\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign val \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg y\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel construct\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     construct\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign x \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop car\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign val \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cons\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg val\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg continue\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     append-done\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003etest\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003egosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ey \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ea b c\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003estart \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eget-register-contents \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003eval\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e a b c\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e　\u003cbr/\u003e\nappend!\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eappend! x y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eset-cdr!\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elast-pair x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n  x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e append!\n  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003emake-machine\n   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ex y temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n   \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003eset-cdr! \u003cspan class=\"synIdentifier\"\u003eset-cdr!\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecdr \u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003enull? \u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003estart\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign temp \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     x-loop\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etest \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop null?\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ebranch \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel after-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign temp \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cdr\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel x-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     after-loop\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eperform \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop set-cdr!\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg y\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n     append!-done \u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003etest\u003c/p\u003e\n\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink\u003egosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ey \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ea b c\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003estart append!\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\ndone\ngosh\u0026gt; \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eget-register-contents append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e a b c\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\n\n","slug":"SICP 問題 5.22"},"content":"\u003cp\u003eappendとappend!を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%BF\"\u003eレジスタ\u003c/a\u003eマシン上に実装する．\u003cbr\u003e\n　\u003cbr\u003e\nappend\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e x y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      y\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e y\u003cspan class=\"synSpecial\"\u003e))))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003emake-machine\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ex y val continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003econs \u003cspan class=\"synIdentifier\"\u003econs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003enull? \u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecar \u003cspan class=\"synIdentifier\"\u003ecar\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecdr \u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003estart\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign continue \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel append-done\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     x-loop\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etest \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop null?\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ebranch \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel after-x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign x \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cdr\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign continue \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel construct\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel x-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     after-x\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign val \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg y\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel construct\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     construct\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore continue\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign x \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop car\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign val \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cons\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg val\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg continue\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     append-done\u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etest\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ey \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ea b c\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003estart \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eget-register-contents \u003cspan class=\"synIdentifier\"\u003eappend\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003eval\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e a b c\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e　\u003cbr\u003e\nappend!\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eappend! x y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eset-cdr!\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elast-pair x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e y\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  x\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synStatement\"\u003edefine\u003c/span\u003e append!\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003emake-machine\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ex y temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003eset-cdr! \u003cspan class=\"synIdentifier\"\u003eset-cdr!\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ecdr \u003cspan class=\"synIdentifier\"\u003ecdr\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003elist\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003enull? \u003cspan class=\"synIdentifier\"\u003enull?\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003estart\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign temp \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg x\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     x-loop\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003etest \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop null?\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ebranch \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel after-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003esave temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eassign temp \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop cdr\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003egoto \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003elabel x-loop\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     after-loop\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003erestore temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e       \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eperform \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eop set-cdr!\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg temp\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003ereg y\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     append!-done \u003cspan class=\"synSpecial\"\u003e)))\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003etest\u003c/p\u003e\n\u003cpre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eset-register-contents! append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ey \u003cspan class=\"synSpecial\"\u003e'(\u003c/span\u003ea b c\u003cspan class=\"synSpecial\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003estart append!\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003edone\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003egosh\u003e \u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003eget-register-contents append! \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003ex\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synSpecial\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e a b c\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"SICP 問題 5.22"},"buildId":"SXcjlEmjiVUOhB_fdC10N","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
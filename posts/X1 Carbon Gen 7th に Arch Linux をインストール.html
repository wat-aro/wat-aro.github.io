<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>X1 Carbon Gen 7th に Arch Linux をインストール | (wat-aro)</title><meta name="title" content="X1 Carbon Gen 7th に Arch Linux をインストール | (wat-aro)"/><meta name="description" content="&lt;p&gt;基本的にはインストールガイドのとおり&lt;a href=&quot;https://wiki.archlinux.jp/index.php/&quot;&gt;https://wiki.archlinux.jp/index.php/&lt;/a&gt;インストールガイドWindowManager は &lt;a class=&quot;keyword&quot; href=&quot;ht"/><meta property="og:locale" content="ja_jp"/><meta property="og:type" content="article"/><meta property="og:site_name" content="(wat-aro)"/><meta property="og:title" content="X1 Carbon Gen 7th に Arch Linux をインストール | (wat-aro)"/><meta property="og:image" content="https://wat-aro.dev/og-images/X1 Carbon Gen 7th に Arch Linux をインストール.png"/><meta property="og:url" content="https://wat-aro.dev/posts/X1%20Carbon%20Gen%207th%20%E3%81%AB%20Arch%20Linux%20%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@wat_aro"/><meta name="twitter:creator" content="@wat_aro"/><meta name="twitter:title" content="X1 Carbon Gen 7th に Arch Linux をインストール | (wat-aro)"/><meta name="twitter:description" content="&lt;p&gt;基本的にはインストールガイドのとおり&lt;a href=&quot;https://wiki.archlinux.jp/index.php/&quot;&gt;https://wiki.archlinux.jp/index.php/&lt;/a&gt;インストールガイドWindowManager は &lt;a class=&quot;keyword&quot; href=&quot;ht"/><meta name="twitter:image" content="https://wat-aro.dev/og-images/X1 Carbon Gen 7th に Arch Linux をインストール.png"/><meta name="next-head-count" content="17"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/efce62830f77489e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/efce62830f77489e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d19aa426007499ce.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-0e1c4012a86ba0a9.js" defer=""></script><script src="/_next/static/7WYSrXu8jRGKUO7_H6jGi/_buildManifest.js" defer=""></script><script src="/_next/static/7WYSrXu8jRGKUO7_H6jGi/_ssgManifest.js" defer=""></script><script src="/_next/static/7WYSrXu8jRGKUO7_H6jGi/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW6D56L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="py-0 md:px-8 min-h-screen flex flex-col items-center"><div class="top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><a href="/"><div class="flex items-center font-midium text-3xl h-full font-bold gap-4"><img class="rounded-full" src="/images/profile.jpg" width="48" height="48" alt="profile image"/>(wat-aro)<!-- --></div></a><ul class="flex gap-3 h-full"><li class="h-full  flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li><li class="h-full  flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts">Blog</a></li></ul></div><div class="flex md:justify-center justify-between w-full"><div class="flex flex-col sm:max-w-sm md:max-w-4xl w-full py-4 px-4"><article class="flex max-w-4xl w-full"><div class="py-4 w-full"><div class="mr-2 text-xs font-bold">2020/02/11</div><h1 class="font-bold text-3xl text-black">X1 Carbon Gen 7th に Arch Linux をインストール</h1><nav class="flex mt-2 mb-2 items-start text-gray-500 text-xs"><div class="flex flex-nowrap max-w-full overflow-x-auto"><p class="mr-1 rounded-full px-2 py-1 border leading-none">Arch</p></div></nav><div class="znc"><p>基本的にはインストールガイドのとおり
<a href="https://wiki.archlinux.jp/index.php/">https://wiki.archlinux.jp/index.php/</a>インストールガイド
WindowManager は <a class="keyword" href="http://d.hatena.ne.jp/keyword/XMonad">XMonad</a></p>
<h2 id="パーティション"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%C6%A5%A3%A5%B7%A5%E7%A5%F3">パーティション</a></h2>
<p>funtoo を参考
<a href="https://www.funtoo.org/Install/GPT_Partitioning">https://www.funtoo.org/Install/GPT_Partitioning</a></p>
<h2 id="フォーマット">フォーマット</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># mkfs.fat -F32 /dev/nvme0n1p1 # ESP
</span><span class="code-line"># fatlabel /dev/nvme0n1p1 efi
</span><span class="code-line"># mkfs.btrfs -L root /dev/nvme0n1p3 # Root
</span><span class="code-line"># mkswap /dev/nvme0n1p2
</span><span class="code-line"># swapon /dev/nvme0n1p2</span></code></pre>
<h2 id="マウント">マウント</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># mount /dev/nvme0n1p3 /mnt
</span><span class="code-line"># mkdir /mnt/boot
</span><span class="code-line"># mount /dev/nvme0n1p1 /mnt/boot</span></code></pre>
<h2 id="システムクロックの更新">システムクロックの更新</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># timedatectl set-ntp true</span></code></pre>
<h2 id="インストール">インストール</h2>
<p>Japanのミラーのみを使うように変更</p>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># vim /etc/pacman.d/mirrorlist</span></code></pre>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pacstrap /mnt base linux linux-firmware</span></code></pre>
<h2 id="システムの設定">システムの設定</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># genfstab -L /mnt >> /mnt/etc/fstab
</span><span class="code-line"># cat /mnt/etc/fstab</span></code></pre>
<h2 id="chroot"><a class="keyword" href="http://d.hatena.ne.jp/keyword/chroot">chroot</a></h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># arch-chroot /mnt</span></code></pre>
<h2 id="タイムゾーン"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3">タイムゾーン</a></h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
</span><span class="code-line"># hwclock --systohc --utc</span></code></pre>
<h2 id="ロケール"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A5%B1%A1%BC%A5%EB">ロケール</a></h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pacman -S neovim
</span><span class="code-line"># nvim /etc/locale.gen</span></code></pre>
<p><code>ja_JP.UTF-8 UTF-8</code> と <code>en_US.UTF-8 UTF-8</code> をアンコメント</p>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># locale-gen
</span><span class="code-line"># echo LANG=en_US.UTF-8 > /etc/locale.conf</span></code></pre>
<h2 id="ネットワーク">ネットワーク</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pacman -S networkmanager
</span><span class="code-line"># systemctl enable NetworkManager.service</span></code></pre>
<h2 id="rootパスワード">Rootパスワード</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># passwd</span></code></pre>
<h2 id="ブート">ブート</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pacman -S efibootmgr
</span><span class="code-line"># efibootmgr -d /dev/nvme0n1 -p 1 -c -L "Arch Linux" -l /vmlinuz-linux -u "root=/dev/nvme0n1p3 rw initrd=/initramfs-linux.img"
</span><span class="code-line"># exit
</span><span class="code-line"># reboot</span></code></pre>
<h2 id="ユーザ追加">ユーザ追加</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pass
</span><span class="code-line"># useradd -m -g users -G wheel -s /bin/bash wat-aro
</span><span class="code-line"># passwd wat-aro
</span><span class="code-line"># groupadd wat-aro
</span><span class="code-line"># gpasswd -a wat-aro wat-aro
</span><span class="code-line">id wat-aro</span></code></pre>
<h2 id="sudo">sudo</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line"># pacman -S sudo
</span><span class="code-line"># EDITOR=nvim visudo</span></code></pre>
<p>以下を追記</p>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">%wheel ALL=(ALL) ALL</span></code></pre>
<h2 id="yay">Yay</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ sudo pacman -S git
</span><span class="code-line">$ sudo pacman -S base-devel
</span><span class="code-line">$ git clone https://aur.archlinux.org/yay.git
</span><span class="code-line">$ cd yay
</span><span class="code-line">$ makepkg -si</span></code></pre>
<h2 id="man">man</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ yay -S man-db
</span><span class="code-line">$ mandb</span></code></pre>
<h2 id="xorg"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Xorg">Xorg</a></h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ yay -S xorg-server
</span><span class="code-line">$ lspci | grep -e VGA -e 3D
</span><span class="code-line">$ yay -S xf86-video-intel
</span><span class="code-line">$ yay -S xorg-xrdb rxvt-unicode xorg-xmodmap</span></code></pre>
<h2 id="gui-準備"><a class="keyword" href="http://d.hatena.ne.jp/keyword/GUI">GUI</a> 準備</h2>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/uim">uim</a> の設定が終わるまで <a class="keyword" href="http://d.hatena.ne.jp/keyword/xmonad">xmonad</a> がちゃんと動かない</p>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ git clone https://github.com/wat-aro/dotfiles
</span><span class="code-line">$ cd dotfiles
</span><span class="code-line">$ ./install.sh
</span><span class="code-line">$ yay -S xmonad xmonad-contrib dmenu xmobar
</span><span class="code-line">$ xmonad --recompile</span></code></pre>
<h2 id="日本語入力">日本語入力</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ yay -S uim anthy gtk3
</span><span class="code-line">$ uim-pref-gtk3</span></code></pre>
<h2 id="ブラウザ">ブラウザ</h2>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ yay -S noto-fonts noto-fonts-cjk noto-fonts-emoji
</span><span class="code-line">$ yay -S google-chrome</span></code></pre>
<h2 id="フォント">フォント</h2>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ricty">Ricty</a> を手動で入れる</p>
<h2 id="lightdm">LightDM</h2>
<p><a href="https://wiki.archlinux.jp/index.php/LightDM">LightDM - ArchWiki</a></p>
<p><a href="https://qiita.com/Hayao0819/items/7784178c7fd568291905">【ArchLinux】最高のログイン画面 - Qiita</a></p>
<p>を参考</p>
<h2 id="オーディオ">オーディオ</h2>
<p>オーディオを有効にするためには <code>sof-firmware</code> も必要</p>
<p><a href="https://www.reddit.com/r/archlinux/comments/e5rpxv/thinkpad_x1_carbon_gen_7_audio_broken_on_541arch11/">Thinkpad X1 Carbon Gen 7 audio broken on 5.4.1-arch1-1 : archlinux</a></p>
<pre class="code shell" data-lang="shell" data-unlink=""><code class="code-highlight"><span class="code-line">$ yay -S alsa-utils sof-firmware pulseaudio pavucontrol</span></code></pre></div></div></article></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"X1 Carbon Gen 7th に Arch Linux をインストール","published":"2020/02/11","tags":["Arch"],"content":"\u003cp\u003e基本的にはインストールガイドのとおり\n\u003ca href=\"https://wiki.archlinux.jp/index.php/\"\u003ehttps://wiki.archlinux.jp/index.php/\u003c/a\u003eインストールガイド\nWindowManager は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/XMonad\"\u003eXMonad\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"パーティション\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%C6%A5%A3%A5%B7%A5%E7%A5%F3\"\u003eパーティション\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003efuntoo を参考\n\u003ca href=\"https://www.funtoo.org/Install/GPT_Partitioning\"\u003ehttps://www.funtoo.org/Install/GPT_Partitioning\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"フォーマット\"\u003eフォーマット\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# mkfs.fat -F32 /dev/nvme0n1p1 # ESP\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# fatlabel /dev/nvme0n1p1 efi\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# mkfs.btrfs -L root /dev/nvme0n1p3 # Root\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# mkswap /dev/nvme0n1p2\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# swapon /dev/nvme0n1p2\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"マウント\"\u003eマウント\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# mount /dev/nvme0n1p3 /mnt\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# mkdir /mnt/boot\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# mount /dev/nvme0n1p1 /mnt/boot\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"システムクロックの更新\"\u003eシステムクロックの更新\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# timedatectl set-ntp true\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"インストール\"\u003eインストール\u003c/h2\u003e\n\u003cp\u003eJapanのミラーのみを使うように変更\u003c/p\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# vim /etc/pacman.d/mirrorlist\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pacstrap /mnt base linux linux-firmware\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"システムの設定\"\u003eシステムの設定\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# genfstab -L /mnt \u003e\u003e /mnt/etc/fstab\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# cat /mnt/etc/fstab\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"chroot\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/chroot\"\u003echroot\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# arch-chroot /mnt\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"タイムゾーン\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3\"\u003eタイムゾーン\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# hwclock --systohc --utc\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ロケール\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%ED%A5%B1%A1%BC%A5%EB\"\u003eロケール\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pacman -S neovim\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# nvim /etc/locale.gen\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eja_JP.UTF-8 UTF-8\u003c/code\u003e と \u003ccode\u003een_US.UTF-8 UTF-8\u003c/code\u003e をアンコメント\u003c/p\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# locale-gen\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# echo LANG=en_US.UTF-8 \u003e /etc/locale.conf\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ネットワーク\"\u003eネットワーク\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pacman -S networkmanager\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# systemctl enable NetworkManager.service\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"rootパスワード\"\u003eRootパスワード\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# passwd\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ブート\"\u003eブート\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pacman -S efibootmgr\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# efibootmgr -d /dev/nvme0n1 -p 1 -c -L \"Arch Linux\" -l /vmlinuz-linux -u \"root=/dev/nvme0n1p3 rw initrd=/initramfs-linux.img\"\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# exit\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# reboot\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ユーザ追加\"\u003eユーザ追加\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pass\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# useradd -m -g users -G wheel -s /bin/bash wat-aro\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# passwd wat-aro\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# groupadd wat-aro\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# gpasswd -a wat-aro wat-aro\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eid wat-aro\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"sudo\"\u003esudo\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e# pacman -S sudo\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e# EDITOR=nvim visudo\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以下を追記\u003c/p\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e%wheel ALL=(ALL) ALL\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"yay\"\u003eYay\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ sudo pacman -S git\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ sudo pacman -S base-devel\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ git clone https://aur.archlinux.org/yay.git\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ cd yay\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ makepkg -si\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"man\"\u003eman\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ yay -S man-db\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ mandb\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"xorg\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Xorg\"\u003eXorg\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ yay -S xorg-server\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ lspci | grep -e VGA -e 3D\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ yay -S xf86-video-intel\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ yay -S xorg-xrdb rxvt-unicode xorg-xmodmap\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"gui-準備\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GUI\"\u003eGUI\u003c/a\u003e 準備\u003c/h2\u003e\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/uim\"\u003euim\u003c/a\u003e の設定が終わるまで \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/xmonad\"\u003exmonad\u003c/a\u003e がちゃんと動かない\u003c/p\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ git clone https://github.com/wat-aro/dotfiles\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ cd dotfiles\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ ./install.sh\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ yay -S xmonad xmonad-contrib dmenu xmobar\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ xmonad --recompile\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"日本語入力\"\u003e日本語入力\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ yay -S uim anthy gtk3\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ uim-pref-gtk3\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ブラウザ\"\u003eブラウザ\u003c/h2\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ yay -S noto-fonts noto-fonts-cjk noto-fonts-emoji\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e$ yay -S google-chrome\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"フォント\"\u003eフォント\u003c/h2\u003e\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ricty\"\u003eRicty\u003c/a\u003e を手動で入れる\u003c/p\u003e\n\u003ch2 id=\"lightdm\"\u003eLightDM\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://wiki.archlinux.jp/index.php/LightDM\"\u003eLightDM - ArchWiki\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/Hayao0819/items/7784178c7fd568291905\"\u003e【ArchLinux】最高のログイン画面 - Qiita\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eを参考\u003c/p\u003e\n\u003ch2 id=\"オーディオ\"\u003eオーディオ\u003c/h2\u003e\n\u003cp\u003eオーディオを有効にするためには \u003ccode\u003esof-firmware\u003c/code\u003e も必要\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.reddit.com/r/archlinux/comments/e5rpxv/thinkpad_x1_carbon_gen_7_audio_broken_on_541arch11/\"\u003eThinkpad X1 Carbon Gen 7 audio broken on 5.4.1-arch1-1 : archlinux\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e$ yay -S alsa-utils sof-firmware pulseaudio pavucontrol\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","slug":"X1 Carbon Gen 7th に Arch Linux をインストール","rawContent":"\n\u003cp\u003e基本的にはインストールガイドのとおり\n\u003ca href=\"https://wiki.archlinux.jp/index.php/\"\u003ehttps://wiki.archlinux.jp/index.php/\u003c/a\u003eインストールガイド\nWindowManager は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/XMonad\"\u003eXMonad\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%C6%A5%A3%A5%B7%A5%E7%A5%F3\"\u003eパーティション\u003c/a\u003e\u003c/h2\u003e\n\n\u003cp\u003efuntoo を参考\n\u003ca href=\"https://www.funtoo.org/Install/GPT_Partitioning\"\u003ehttps://www.funtoo.org/Install/GPT_Partitioning\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003eフォーマット\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# mkfs.fat -F32 /dev/nvme0n1p1 # ESP\n# fatlabel /dev/nvme0n1p1 efi\n# mkfs.btrfs -L root /dev/nvme0n1p3 # Root\n# mkswap /dev/nvme0n1p2\n# swapon /dev/nvme0n1p2\u003c/pre\u003e\n\n\n\u003ch2\u003eマウント\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# mount /dev/nvme0n1p3 /mnt\n# mkdir /mnt/boot\n# mount /dev/nvme0n1p1 /mnt/boot\u003c/pre\u003e\n\n\n\u003ch2\u003eシステムクロックの更新\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# timedatectl set-ntp true\u003c/pre\u003e\n\n\n\u003ch2\u003eインストール\u003c/h2\u003e\n\n\u003cp\u003eJapanのミラーのみを使うように変更\u003c/p\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# vim /etc/pacman.d/mirrorlist\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pacstrap /mnt base linux linux-firmware\u003c/pre\u003e\n\n\n\u003ch2\u003eシステムの設定\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# genfstab -L /mnt \u0026gt;\u0026gt; /mnt/etc/fstab\n# cat /mnt/etc/fstab\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/chroot\"\u003echroot\u003c/a\u003e\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# arch-chroot /mnt\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3\"\u003eタイムゾーン\u003c/a\u003e\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n# hwclock --systohc --utc\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%ED%A5%B1%A1%BC%A5%EB\"\u003eロケール\u003c/a\u003e\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pacman -S neovim\n# nvim /etc/locale.gen\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eja_JP.UTF-8 UTF-8\u003c/code\u003e と \u003ccode\u003een_US.UTF-8 UTF-8\u003c/code\u003e をアンコメント\u003c/p\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# locale-gen\n# echo LANG=en_US.UTF-8 \u0026gt; /etc/locale.conf\u003c/pre\u003e\n\n\n\u003ch2\u003eネットワーク\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pacman -S networkmanager\n# systemctl enable NetworkManager.service\u003c/pre\u003e\n\n\n\u003ch2\u003eRootパスワード\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# passwd\u003c/pre\u003e\n\n\n\u003ch2\u003eブート\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pacman -S efibootmgr\n# efibootmgr -d /dev/nvme0n1 -p 1 -c -L \u0026#34;Arch Linux\u0026#34; -l /vmlinuz-linux -u \u0026#34;root=/dev/nvme0n1p3 rw initrd=/initramfs-linux.img\u0026#34;\n# exit\n# reboot\u003c/pre\u003e\n\n\n\u003ch2\u003eユーザ追加\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pass\n# useradd -m -g users -G wheel -s /bin/bash wat-aro\n# passwd wat-aro\n# groupadd wat-aro\n# gpasswd -a wat-aro wat-aro\nid wat-aro\u003c/pre\u003e\n\n\n\u003ch2\u003esudo\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e# pacman -S sudo\n# EDITOR=nvim visudo\u003c/pre\u003e\n\n\n\u003cp\u003e以下を追記\u003c/p\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e%wheel ALL=(ALL) ALL\u003c/pre\u003e\n\n\n\u003ch2\u003eYay\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ sudo pacman -S git\n$ sudo pacman -S base-devel\n$ git clone https://aur.archlinux.org/yay.git\n$ cd yay\n$ makepkg -si\u003c/pre\u003e\n\n\n\u003ch2\u003eman\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ yay -S man-db\n$ mandb\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Xorg\"\u003eXorg\u003c/a\u003e\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ yay -S xorg-server\n$ lspci | grep -e VGA -e 3D\n$ yay -S xf86-video-intel\n$ yay -S xorg-xrdb rxvt-unicode xorg-xmodmap\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GUI\"\u003eGUI\u003c/a\u003e 準備\u003c/h2\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/uim\"\u003euim\u003c/a\u003e の設定が終わるまで \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/xmonad\"\u003exmonad\u003c/a\u003e がちゃんと動かない\u003c/p\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ git clone https://github.com/wat-aro/dotfiles\n$ cd dotfiles\n$ ./install.sh\n$ yay -S xmonad xmonad-contrib dmenu xmobar\n$ xmonad --recompile\u003c/pre\u003e\n\n\n\u003ch2\u003e日本語入力\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ yay -S uim anthy gtk3\n$ uim-pref-gtk3\u003c/pre\u003e\n\n\n\u003ch2\u003eブラウザ\u003c/h2\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ yay -S noto-fonts noto-fonts-cjk noto-fonts-emoji\n$ yay -S google-chrome\u003c/pre\u003e\n\n\n\u003ch2\u003eフォント\u003c/h2\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ricty\"\u003eRicty\u003c/a\u003e を手動で入れる\u003c/p\u003e\n\n\u003ch2\u003eLightDM\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://wiki.archlinux.jp/index.php/LightDM\"\u003eLightDM - ArchWiki\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/Hayao0819/items/7784178c7fd568291905\"\u003e\u0026#x3010;ArchLinux\u0026#x3011;\u0026#x6700;\u0026#x9AD8;\u0026#x306E;\u0026#x30ED;\u0026#x30B0;\u0026#x30A4;\u0026#x30F3;\u0026#x753B;\u0026#x9762; - Qiita\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eを参考\u003c/p\u003e\n\n\u003ch2\u003eオーディオ\u003c/h2\u003e\n\n\u003cp\u003eオーディオを有効にするためには \u003ccode\u003esof-firmware\u003c/code\u003e も必要\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.reddit.com/r/archlinux/comments/e5rpxv/thinkpad_x1_carbon_gen_7_audio_broken_on_541arch11/\"\u003eThinkpad X1 Carbon Gen 7 audio broken on 5.4.1-arch1-1 : archlinux\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code shell\" data-lang=\"shell\" data-unlink\u003e$ yay -S alsa-utils sof-firmware pulseaudio pavucontrol\u003c/pre\u003e\n\n\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"X1 Carbon Gen 7th に Arch Linux をインストール"},"buildId":"7WYSrXu8jRGKUO7_H6jGi","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
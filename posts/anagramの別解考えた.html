<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>anagramの別解考えた | (wat-aro)</title><meta name="title" content="anagramの別解考えた | (wat-aro)"/><meta name="description" content="&lt;p&gt;まず二つの文字列のサイズを計測して，それらが等しくなければfalseを返す．同じ場合は一文字ずつカウントしながらハッシュに入れていく．この時，s1の文字はインクリメントして，s2の文字はデクリメントする．最後にハッシュのバリューを取りだして，すべてゼロならtrue.ひとつでもゼロでなければfalse.それで書いた"/><meta property="og:locale" content="ja_jp"/><meta property="og:type" content="article"/><meta property="og:site_name" content="(wat-aro)"/><meta property="og:title" content="anagramの別解考えた | (wat-aro)"/><meta property="og:image" content="https://wat-aro.dev/og-images/anagramの別解考えた.png"/><meta property="og:url" content="https://wat-aro.dev/posts/anagram%E3%81%AE%E5%88%A5%E8%A7%A3%E8%80%83%E3%81%88%E3%81%9F"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@wat_aro"/><meta name="twitter:creator" content="@wat_aro"/><meta name="twitter:title" content="anagramの別解考えた | (wat-aro)"/><meta name="twitter:description" content="&lt;p&gt;まず二つの文字列のサイズを計測して，それらが等しくなければfalseを返す．同じ場合は一文字ずつカウントしながらハッシュに入れていく．この時，s1の文字はインクリメントして，s2の文字はデクリメントする．最後にハッシュのバリューを取りだして，すべてゼロならtrue.ひとつでもゼロでなければfalse.それで書いた"/><meta name="twitter:image" content="https://wat-aro.dev/og-images/anagramの別解考えた.png"/><meta name="next-head-count" content="17"/><link rel="icon" href="/images/favicon.ico"/><link rel="preload" href="/_next/static/css/cef7709dba1aabcc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cef7709dba1aabcc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-e7be5a2ce3007f17.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-847cc7a6659a518e.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-5a221d7c4dbc914e.js" defer=""></script><script src="/_next/static/Q8fC0uqSTU4naW5qMLiKY/_buildManifest.js" defer=""></script><script src="/_next/static/Q8fC0uqSTU4naW5qMLiKY/_ssgManifest.js" defer=""></script><script src="/_next/static/Q8fC0uqSTU4naW5qMLiKY/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MW6D56L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="py-0 md:px-8 min-h-screen flex flex-col items-center"><div class="top-0 bg-white w-full h-16 flex flex-row justify-between items-center px-4 border-b-2"><a href="/"><div class="flex items-center font-midium text-3xl h-full font-bold gap-4"><img class="rounded-full" src="/images/profile.jpg" width="48" height="48" alt="profile image"/>(wat-aro)<!-- --></div></a><ul class="flex gap-3 h-full"><li class="h-full flex flex-col justify-end border-black pb-3 border-b-4"><a href="/posts">Blog</a></li><li class="h-full flex flex-col justify-end border-black pb-4"><a href="/slides">Slide</a></li><li class="h-full flex flex-col justify-end border-black pb-4"><a href="/about">About</a></li></ul></div><div class="flex md:justify-center justify-between w-full flex-grow"><div class="flex flex-col sm:max-w-sm md:max-w-4xl w-full py-4 px-4"><article class="flex max-w-4xl w-full"><div class="py-4 w-full"><div class="mr-2 text-xs font-bold">2016/10/04</div><h1 class="font-bold text-3xl text-black">anagramの別解考えた</h1><nav class="flex mt-2 mb-2 items-start text-gray-500 text-xs"><div class="flex flex-wrap max-w-full overflow-x-auto gap-2"><a href="/tags/ruby"><p class="mr-1 rounded-full px-2 py-1 border leading-none">ruby</p></a></div></nav><div class="znc"><p>まず二つの文字列のサイズを計測して，それらが等しくなければfalseを返す．
同じ場合は一文字ずつカウントしながらハッシュに入れていく．
この時，s1の文字はインクリメントして，s2の文字はデクリメントする．
最後にハッシュのバリューを取りだして，すべてゼロならtrue.
ひとつでもゼロでなければfalse.
それで書いたのが以下．</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synPreProc">def</span> <span class="synIdentifier">anagram</span>(s1, s2)
</span><span class="code-line">  <span class="synStatement">return</span> <span class="synConstant">false</span> <span class="synStatement">if</span> s1.size != s2.size
</span><span class="code-line">
</span><span class="code-line">  compare(s1.downcase, s2.downcase, s1.size)
</span><span class="code-line"><span class="synPreProc">end</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synPreProc">def</span> <span class="synIdentifier">compare</span>(s1, s2, size)
</span><span class="code-line">  counts = <span class="synType">Hash</span>.new(<span class="synConstant">0</span>)
</span><span class="code-line">  <span class="synStatement">for</span> i <span class="synStatement">in</span> <span class="synConstant">0</span>..(size-<span class="synConstant">1</span>) <span class="synStatement">do</span>
</span><span class="code-line">    counts[s1[i]] += <span class="synConstant">1</span>
</span><span class="code-line">    counts[s2[i]] -= <span class="synConstant">1</span>
</span><span class="code-line">  <span class="synStatement">end</span>
</span><span class="code-line">
</span><span class="code-line">  counts.values.all?{ |<span class="synIdentifier">value</span>| value == <span class="synConstant">0</span> }
</span><span class="code-line"><span class="synPreProc">end</span>
</span></code></pre>
<p>んー</p>
<p>追記
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4">素数</a>の積を取るやり方を<a class="keyword" href="http://d.hatena.ne.jp/keyword/reddit">reddit</a>で教えてもらったので．</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink=""><code class="code-highlight"><span class="code-line"><span class="synPreProc">def</span> <span class="synIdentifier">str_product</span>(str)
</span><span class="code-line">  <span class="synType">PRIMES</span> = [<span class="synConstant">2</span>,   <span class="synConstant">3</span>,  <span class="synConstant">5</span>,  <span class="synConstant">7</span>, <span class="synConstant">11</span>, <span class="synConstant">13</span>, <span class="synConstant">17</span>, <span class="synConstant">19</span>, <span class="synConstant">23</span>, <span class="synConstant">29</span>,
</span><span class="code-line">            <span class="synConstant">31</span>, <span class="synConstant">37</span>, <span class="synConstant">41</span>, <span class="synConstant">43</span>, <span class="synConstant">47</span>, <span class="synConstant">53</span>, <span class="synConstant">59</span>, <span class="synConstant">61</span>, <span class="synConstant">67</span>, <span class="synConstant">71</span>,
</span><span class="code-line">            <span class="synConstant">73</span>, <span class="synConstant">79</span>, <span class="synConstant">83</span>, <span class="synConstant">89</span>, <span class="synConstant">97</span>, <span class="synConstant">101</span>, <span class="synConstant">103</span>, <span class="synConstant">107</span>, <span class="synConstant">109</span>, <span class="synConstant">113</span>,
</span><span class="code-line">            <span class="synConstant">127</span>, <span class="synConstant">131</span>, <span class="synConstant">137</span>, <span class="synConstant">139</span>, <span class="synConstant">149</span>, <span class="synConstant">151</span>, <span class="synConstant">157</span>, <span class="synConstant">163</span>, <span class="synConstant">167</span>, <span class="synConstant">173</span>,
</span><span class="code-line">            <span class="synConstant">179</span>, <span class="synConstant">181</span>, <span class="synConstant">191</span>, <span class="synConstant">193</span>, <span class="synConstant">197</span>, <span class="synConstant">199</span>, <span class="synConstant">211</span>, <span class="synConstant">223</span>, <span class="synConstant">227</span>, <span class="synConstant">229</span>,
</span><span class="code-line">            <span class="synConstant">233</span>, <span class="synConstant">239</span>, <span class="synConstant">241</span>, <span class="synConstant">251</span>, <span class="synConstant">257</span>, <span class="synConstant">263</span>, <span class="synConstant">269</span>, <span class="synConstant">271</span>, <span class="synConstant">277</span>, <span class="synConstant">281</span>,
</span><span class="code-line">            <span class="synConstant">283</span>, <span class="synConstant">293</span>, <span class="synConstant">307</span>, <span class="synConstant">311</span>, <span class="synConstant">313</span>, <span class="synConstant">317</span>, <span class="synConstant">331</span>, <span class="synConstant">337</span>, <span class="synConstant">347</span>, <span class="synConstant">349</span>,
</span><span class="code-line">            <span class="synConstant">353</span>, <span class="synConstant">359</span>, <span class="synConstant">367</span>, <span class="synConstant">373</span>, <span class="synConstant">379</span>, <span class="synConstant">383</span>, <span class="synConstant">389</span>, <span class="synConstant">397</span>, <span class="synConstant">401</span>, <span class="synConstant">409</span>,
</span><span class="code-line">            <span class="synConstant">419</span>, <span class="synConstant">421</span>, <span class="synConstant">431</span>, <span class="synConstant">433</span>, <span class="synConstant">439</span>, <span class="synConstant">443</span>, <span class="synConstant">449</span>, <span class="synConstant">457</span>, <span class="synConstant">461</span>, <span class="synConstant">463</span>,
</span><span class="code-line">            <span class="synConstant">467</span>, <span class="synConstant">479</span>, <span class="synConstant">487</span>, <span class="synConstant">491</span>, <span class="synConstant">499</span>, <span class="synConstant">503</span>, <span class="synConstant">509</span>, <span class="synConstant">521</span>, <span class="synConstant">523</span>, <span class="synConstant">541</span>,
</span><span class="code-line">            <span class="synConstant">547</span>, <span class="synConstant">557</span>, <span class="synConstant">563</span>, <span class="synConstant">569</span>, <span class="synConstant">571</span>, <span class="synConstant">577</span>, <span class="synConstant">587</span>, <span class="synConstant">593</span>, <span class="synConstant">599</span>, <span class="synConstant">601</span>,
</span><span class="code-line">            <span class="synConstant">607</span>, <span class="synConstant">613</span>, <span class="synConstant">617</span>, <span class="synConstant">619</span>, <span class="synConstant">631</span>, <span class="synConstant">641</span>, <span class="synConstant">643</span>, <span class="synConstant">647</span>, <span class="synConstant">653</span>, <span class="synConstant">659</span>,
</span><span class="code-line">            <span class="synConstant">661</span>, <span class="synConstant">673</span>, <span class="synConstant">677</span>, <span class="synConstant">683</span>, <span class="synConstant">691</span>, <span class="synConstant">701</span>, <span class="synConstant">709</span>, <span class="synConstant">719</span>]
</span><span class="code-line">  result = <span class="synConstant">0</span>
</span><span class="code-line">  (<span class="synConstant">0</span>..(str.size - <span class="synConstant">1</span>)).each <span class="synStatement">do</span> |<span class="synIdentifier">i</span>|
</span><span class="code-line">    result +=<span class="synType">PRIMES</span>[str[i].downcase.ord]
</span><span class="code-line">  <span class="synStatement">end</span>
</span><span class="code-line">  result
</span><span class="code-line"><span class="synPreProc">end</span>
</span><span class="code-line">
</span><span class="code-line"><span class="synPreProc">def</span> <span class="synIdentifier">anagram</span>(s1, s2)
</span><span class="code-line">  str_product(s1) == str_product(s2)
</span><span class="code-line"><span class="synPreProc">end</span>
</span></code></pre>
<p>これはいい</p></div></div></article></div></div><div class="flex md:justify-center w-full"><div class="flex flex-col md:max-w-4xl w-full"><hr/><div class="flex justify-center pt-4 pb-8">© 2022 wat-aro</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"anagramの別解考えた","published":"2016/10/04","tags":["ruby"],"content":"\n\u003cp\u003eまず二つの文字列のサイズを計測して，それらが等しくなければfalseを返す．\n同じ場合は一文字ずつカウントしながらハッシュに入れていく．\nこの時，s1の文字はインクリメントして，s2の文字はデクリメントする．\n最後にハッシュのバリューを取りだして，すべてゼロならtrue.\nひとつでもゼロでなければfalse.\nそれで書いたのが以下．\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eanagram\u003c/span\u003e(s1, s2)\n  \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synConstant\"\u003efalse\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e s1.size != s2.size\n\n  compare(s1.downcase, s2.downcase, s1.size)\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ecompare\u003c/span\u003e(s1, s2, size)\n  counts = \u003cspan class=\"synType\"\u003eHash\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e)\n  \u003cspan class=\"synStatement\"\u003efor\u003c/span\u003e i \u003cspan class=\"synStatement\"\u003ein\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e..(size-\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e) \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n    counts[s1[i]] += \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n    counts[s2[i]] -= \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\n  counts.values.all?{ |\u003cspan class=\"synIdentifier\"\u003evalue\u003c/span\u003e| value == \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e }\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eんー\u003c/p\u003e\n\n\u003cp\u003e追記\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4\"\u003e素数\u003c/a\u003eの積を取るやり方を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/reddit\"\u003ereddit\u003c/a\u003eで教えてもらったので．\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003estr_product\u003c/span\u003e(str)\n  \u003cspan class=\"synType\"\u003ePRIMES\u003c/span\u003e = [\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e,   \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e,  \u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e,  \u003cspan class=\"synConstant\"\u003e7\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e11\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e13\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e17\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e19\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e23\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e29\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e31\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e37\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e41\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e43\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e47\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e53\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e59\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e61\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e67\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e71\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e73\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e79\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e83\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e89\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e97\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e101\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e103\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e107\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e109\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e113\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e127\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e131\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e137\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e139\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e149\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e151\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e157\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e163\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e167\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e173\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e179\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e181\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e191\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e193\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e197\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e199\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e211\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e223\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e227\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e229\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e233\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e239\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e241\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e251\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e257\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e263\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e269\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e271\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e277\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e281\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e283\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e293\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e307\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e311\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e313\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e317\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e331\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e337\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e347\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e349\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e353\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e359\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e367\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e373\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e379\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e383\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e389\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e397\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e401\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e409\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e419\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e421\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e431\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e433\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e439\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e443\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e449\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e457\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e461\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e463\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e467\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e479\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e487\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e491\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e503\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e509\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e521\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e523\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e541\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e547\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e557\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e563\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e569\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e571\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e577\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e587\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e593\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e599\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e601\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e607\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e613\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e617\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e619\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e631\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e641\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e643\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e647\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e653\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e659\u003c/span\u003e,\n            \u003cspan class=\"synConstant\"\u003e661\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e673\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e677\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e683\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e691\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e701\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e709\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e719\u003c/span\u003e]\n  result = \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\n  (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e..(str.size - \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)).each \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003ei\u003c/span\u003e|\n    result +=\u003cspan class=\"synType\"\u003ePRIMES\u003c/span\u003e[str[i].downcase.ord]\n  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n  result\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eanagram\u003c/span\u003e(s1, s2)\n  str_product(s1) == str_product(s2)\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eこれはいい\u003c/p\u003e\n\n","slug":"anagramの別解考えた"},"content":"\u003cp\u003eまず二つの文字列のサイズを計測して，それらが等しくなければfalseを返す．\n同じ場合は一文字ずつカウントしながらハッシュに入れていく．\nこの時，s1の文字はインクリメントして，s2の文字はデクリメントする．\n最後にハッシュのバリューを取りだして，すべてゼロならtrue.\nひとつでもゼロでなければfalse.\nそれで書いたのが以下．\u003c/p\u003e\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eanagram\u003c/span\u003e(s1, s2)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synConstant\"\u003efalse\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e s1.size != s2.size\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  compare(s1.downcase, s2.downcase, s1.size)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ecompare\u003c/span\u003e(s1, s2, size)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  counts = \u003cspan class=\"synType\"\u003eHash\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synStatement\"\u003efor\u003c/span\u003e i \u003cspan class=\"synStatement\"\u003ein\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e..(size-\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e) \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    counts[s1[i]] += \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    counts[s2[i]] -= \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  counts.values.all?{ |\u003cspan class=\"synIdentifier\"\u003evalue\u003c/span\u003e| value == \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e }\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eんー\u003c/p\u003e\n\u003cp\u003e追記\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4\"\u003e素数\u003c/a\u003eの積を取るやり方を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/reddit\"\u003ereddit\u003c/a\u003eで教えてもらったので．\u003c/p\u003e\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink=\"\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003estr_product\u003c/span\u003e(str)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synType\"\u003ePRIMES\u003c/span\u003e = [\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e,   \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e,  \u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e,  \u003cspan class=\"synConstant\"\u003e7\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e11\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e13\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e17\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e19\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e23\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e29\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e31\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e37\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e41\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e43\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e47\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e53\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e59\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e61\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e67\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e71\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e73\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e79\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e83\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e89\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e97\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e101\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e103\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e107\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e109\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e113\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e127\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e131\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e137\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e139\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e149\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e151\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e157\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e163\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e167\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e173\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e179\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e181\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e191\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e193\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e197\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e199\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e211\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e223\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e227\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e229\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e233\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e239\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e241\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e251\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e257\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e263\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e269\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e271\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e277\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e281\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e283\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e293\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e307\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e311\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e313\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e317\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e331\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e337\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e347\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e349\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e353\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e359\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e367\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e373\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e379\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e383\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e389\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e397\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e401\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e409\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e419\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e421\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e431\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e433\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e439\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e443\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e449\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e457\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e461\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e463\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e467\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e479\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e487\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e491\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e503\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e509\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e521\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e523\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e541\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e547\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e557\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e563\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e569\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e571\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e577\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e587\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e593\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e599\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e601\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e607\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e613\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e617\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e619\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e631\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e641\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e643\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e647\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e653\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e659\u003c/span\u003e,\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"synConstant\"\u003e661\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e673\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e677\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e683\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e691\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e701\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e709\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e719\u003c/span\u003e]\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  result = \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e..(str.size - \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)).each \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003ei\u003c/span\u003e|\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    result +=\u003cspan class=\"synType\"\u003ePRIMES\u003c/span\u003e[str[i].downcase.ord]\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  result\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eanagram\u003c/span\u003e(s1, s2)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  str_product(s1) == str_product(s2)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれはいい\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"anagramの別解考えた"},"buildId":"Q8fC0uqSTU4naW5qMLiKY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
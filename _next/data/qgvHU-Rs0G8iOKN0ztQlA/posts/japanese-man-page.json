{"pageProps":{"post":{"title":"Arch Linux で日本語 man ページと英語 man ページを使い分ける","published":"2022/05/29","tags":["Linux","Arch"],"content":"\n普段コードを書く環境ではエラーメッセージのググラビリティを考えて locale を英語にしています。\n日本語でエラーメッセージを表示しても同じ問題にひっかかっている issue や StackOverFlow などが出てきづらくなるためです。\nでも man ページを読む際には日本語のほうが楽ですよね。\nしかし日本語の man ページしか見れなくなるのも他の人に共有する際に困ってしまいます。\nここでは日本語と英語の man ページをいい感じに共存する方法を紹介します。\n\nと言ってもやることは単純で\n\n```shell\n$ LANG=ja_JP.UTF-8 yay -S man-pages-ja\n```\n\nで日本語 man をインストールし、\n\n```fish\nabbr --add jman \"LANG=ja_JP.UTF-8 man\"\n```\n\nのように `abbr` を登録するか\n\n```bash\nalias jman='LANG=ja_JP.UTF-8 man'\n```\n\nのように `alias` を登録するだけです。\n`PKGBUILD` を見るとわかるのですが、`man-pages-ja` では環境変数 `LANG` の値を見て日本語 man をインストールするディレクトリを判定しています。\n\n```shell\npackage() {\n    mkdir -p ${pkgdir}/usr/share/man/${LANG}\n    cd ${srcdir}/${pkgname}-${pkgver}\n    make install\n}\n```\n\nそのため `yay -S` する際に `LANG` を渡すことで任意のディレクトリに日本語 man をインストールできるわけです。\nこうすると `man` を叩けばオリジナルの man ページが、\n`jman` を叩くと日本語の man ページが表示できるようになります。\n\nめでたしめでたし。\n","slug":"japanese-man-page"},"content":"<p>普段コードを書く環境ではエラーメッセージのググラビリティを考えて locale を英語にしています。<br>\n日本語でエラーメッセージを表示しても同じ問題にひっかかっている issue や StackOverFlow などが出てきづらくなるためです。<br>\nでも man ページを読む際には日本語のほうが楽ですよね。<br>\nしかし日本語の man ページしか見れなくなるのも他の人に共有する際に困ってしまいます。<br>\nここでは日本語と英語の man ページをいい感じに共存する方法を紹介します。</p>\n<p>と言ってもやることは単純で</p>\n<pre class=\"language-shell\"><code class=\"language-shell code-highlight\"><span class=\"code-line\">$ <span class=\"token assign-left variable\"><span class=\"token environment constant\">LANG</span></span><span class=\"token operator\">=</span>ja_JP.UTF-8 yay <span class=\"token parameter variable\">-S</span> man-pages-ja\n</span></code></pre>\n<p>で日本語 man をインストールし、</p>\n<pre><code class=\"language-fish code-highlight\"><span class=\"code-line\">abbr --add jman \"LANG=ja_JP.UTF-8 man\"\n</span></code></pre>\n<p>のように <code>abbr</code> を登録するか</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">jman</span><span class=\"token operator\">=</span><span class=\"token string\">'LANG=ja_JP.UTF-8 man'</span>\n</span></code></pre>\n<p>のように <code>alias</code> を登録するだけです。<br>\n<code>PKGBUILD</code> を見るとわかるのですが、<code>man-pages-ja</code> では環境変数 <code>LANG</code> の値を見て日本語 man をインストールするディレクトリを判定しています。</p>\n<pre class=\"language-shell\"><code class=\"language-shell code-highlight\"><span class=\"code-line\"><span class=\"token function-name function\">package</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">    <span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> <span class=\"token variable\">${pkgdir}</span>/usr/share/man/<span class=\"token variable\">${<span class=\"token environment constant\">LANG</span>}</span>\n</span><span class=\"code-line\">    <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${srcdir}</span>/<span class=\"token variable\">${pkgname}</span>-<span class=\"token variable\">${pkgver}</span>\n</span><span class=\"code-line\">    <span class=\"token function\">make</span> <span class=\"token function\">install</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n<p>そのため <code>yay -S</code> する際に <code>LANG</code> を渡すことで任意のディレクトリに日本語 man をインストールできるわけです。<br>\nこうすると <code>man</code> を叩けばオリジナルの man ページが、<br>\n<code>jman</code> を叩くと日本語の man ページが表示できるようになります。</p>\n<p>めでたしめでたし。</p>"},"__N_SSG":true}
{"pageProps":{"post":{"title":"emacs で fcitx-mozc を使う","published":"2020/02/23","tags":["Arch","mozc","emacs","fcitx"],"content":"\n<p>今はこの記事のやり方のほうがよい</p>\n\n<p><iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fain0204.hatenablog.com%2Fentry%2F2016%2F08%2F12%2F235206\" title=\"Arch Linuxにemacs-mozcをインストールした話 - twitterよりちょっと長いの\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://ain0204.hatenablog.com/entry/2016/08/12/235206\">ain0204.hatenablog.com</a></cite></p>\n\n<hr />\n\n<p>以下は今だとうまく動かない</p>\n\n<pre class=\"code shell\" data-lang=\"shell\" data-unlink>$ yay -G fcitx-mozc</pre>\n\n\n<p><code>PKGBUILD</code> を編集する。</p>\n\n<pre class=\"code lang-diff\" data-lang=\"diff\" data-unlink><span class=\"synSpecial\">-  _targets=&quot;server/server.gyp:mozc_server gui/gui.gyp:mozc_tool unix/fcitx/fcitx.gyp:fcitx-mozc&quot;</span>\n<span class=\"synIdentifier\">+  _targets=&quot;server/server.gyp:mozc_server gui/gui.gyp:mozc_tool unix/fcitx/fcitx.gyp:fcitx-mozc unix/emacs/emacs.gyp:mozc_emacs_helper&quot;</span>\n\n   install -D -m 755 out_linux/${_bldtype}/mozc_server &quot;${pkgdir}/usr/lib/mozc/mozc_server&quot;\n   install    -m 755 out_linux/${_bldtype}/mozc_tool   &quot;${pkgdir}/usr/lib/mozc/mozc_tool&quot;\n\n<span class=\"synIdentifier\">+  install -D -m 755 out_linux/${_bldtype}/mozc_emacs_helper &quot;${pkgdir}/usr/bin/mozc_emacs_helper&quot;</span>\n<span class=\"synIdentifier\">+</span>\n   install -d &quot;${pkgdir}/usr/share/licenses/$pkgname/&quot;\n   install -m 644 LICENSE data/installer/*.html &quot;${pkgdir}/usr/share/licenses/${pkgname}/&quot;\n</pre>\n\n\n<p>手動でインストール</p>\n\n<pre class=\"code shell\" data-lang=\"shell\" data-unlink>$ cd fcitx-mozc\n$ makepkg -si\n\n# 不明な公開鍵についてのエラーがでる\n$ sudo pacman-key --recv-keys &lt;keyid&gt;\n$ gpg --recv-keys &lt;keyid&gt;\n\n$ makepkg -si</pre>\n\n\n<p>これで <code>/usr/bin/mozc_emacs_helper</code> が入る。\nあとは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/emacs\">emacs</a>の設定をする。</p>\n\n<pre class=\"code elisp\" data-lang=\"elisp\" data-unlink>(use-package mozc\n  :init\n  (setq default-input-method &#34;japanese-mozc&#34;)\n  :custom\n  (mozc-candidate-style &#39;overlay))</pre>\n\n\n","slug":"emacs で fcitx-mozc を使う"},"content":"<p>今はこの記事のやり方のほうがよい</p>\n<p><iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fain0204.hatenablog.com%2Fentry%2F2016%2F08%2F12%2F235206\" title=\"Arch Linuxにemacs-mozcをインストールした話 - twitterよりちょっと長いの\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://ain0204.hatenablog.com/entry/2016/08/12/235206\">ain0204.hatenablog.com</a></cite></p>\n<hr>\n<p>以下は今だとうまく動かない</p>\n<pre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\">$ yay -G fcitx-mozc</span></code></pre>\n<p><code>PKGBUILD</code> を編集する。</p>\n<pre class=\"code lang-diff\" data-lang=\"diff\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\"><span class=\"synSpecial\">-  _targets=\"server/server.gyp:mozc_server gui/gui.gyp:mozc_tool unix/fcitx/fcitx.gyp:fcitx-mozc\"</span>\n</span><span class=\"code-line\"><span class=\"synIdentifier\">+  _targets=\"server/server.gyp:mozc_server gui/gui.gyp:mozc_tool unix/fcitx/fcitx.gyp:fcitx-mozc unix/emacs/emacs.gyp:mozc_emacs_helper\"</span>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">   install -D -m 755 out_linux/${_bldtype}/mozc_server \"${pkgdir}/usr/lib/mozc/mozc_server\"\n</span><span class=\"code-line\">   install    -m 755 out_linux/${_bldtype}/mozc_tool   \"${pkgdir}/usr/lib/mozc/mozc_tool\"\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"synIdentifier\">+  install -D -m 755 out_linux/${_bldtype}/mozc_emacs_helper \"${pkgdir}/usr/bin/mozc_emacs_helper\"</span>\n</span><span class=\"code-line\"><span class=\"synIdentifier\">+</span>\n</span><span class=\"code-line\">   install -d \"${pkgdir}/usr/share/licenses/$pkgname/\"\n</span><span class=\"code-line\">   install -m 644 LICENSE data/installer/*.html \"${pkgdir}/usr/share/licenses/${pkgname}/\"\n</span></code></pre>\n<p>手動でインストール</p>\n<pre class=\"code shell\" data-lang=\"shell\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\">$ cd fcitx-mozc\n</span><span class=\"code-line\">$ makepkg -si\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"># 不明な公開鍵についてのエラーがでる\n</span><span class=\"code-line\">$ sudo pacman-key --recv-keys &#x3C;keyid>\n</span><span class=\"code-line\">$ gpg --recv-keys &#x3C;keyid>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">$ makepkg -si</span></code></pre>\n<p>これで <code>/usr/bin/mozc_emacs_helper</code> が入る。\nあとは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/emacs\">emacs</a>の設定をする。</p>\n<pre class=\"code elisp\" data-lang=\"elisp\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\">(use-package mozc\n</span><span class=\"code-line\">  :init\n</span><span class=\"code-line\">  (setq default-input-method \"japanese-mozc\")\n</span><span class=\"code-line\">  :custom\n</span><span class=\"code-line\">  (mozc-candidate-style 'overlay))</span></code></pre>"},"__N_SSG":true}
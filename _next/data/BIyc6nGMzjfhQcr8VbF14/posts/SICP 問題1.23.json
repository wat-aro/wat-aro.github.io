{"pageProps":{"post":{"data":{"title":"SICP 問題1.23","published":"2015/10/07","tags":["scheme","SICP"]},"content":"\n\n<pre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink><span class=\"synSpecial\">(</span><span class=\"synStatement\">define</span> <span class=\"synSpecial\">(</span>next n<span class=\"synSpecial\">)</span>\n  <span class=\"synSpecial\">(</span><span class=\"synStatement\">if</span> <span class=\"synSpecial\">(</span><span class=\"synIdentifier\">=</span> n <span class=\"synConstant\">2</span><span class=\"synSpecial\">)</span>\n      <span class=\"synConstant\">3</span>\n      <span class=\"synSpecial\">(</span><span class=\"synIdentifier\">+</span> <span class=\"synConstant\">2</span> n<span class=\"synSpecial\">)))</span>\n\n<span class=\"synSpecial\">(</span><span class=\"synStatement\">define</span> <span class=\"synSpecial\">(</span>find-divisor n test-divisor<span class=\"synSpecial\">)</span>\n  <span class=\"synSpecial\">(</span><span class=\"synStatement\">cond</span> <span class=\"synSpecial\">((</span><span class=\"synIdentifier\">&gt;</span> <span class=\"synSpecial\">(</span>square test-divisor<span class=\"synSpecial\">)</span> n<span class=\"synSpecial\">)</span> n<span class=\"synSpecial\">)</span>\n        <span class=\"synSpecial\">((</span>divides? test-divisor n<span class=\"synSpecial\">)</span> test-divisor<span class=\"synSpecial\">)</span>\n        <span class=\"synSpecial\">(</span><span class=\"synStatement\">else</span> <span class=\"synSpecial\">(</span>find-divisor n <span class=\"synSpecial\">(</span>next test-divisor<span class=\"synSpecial\">)))))</span>\n</pre>\n\n\n\n\n<pre class=\"code\" data-lang=\"\" data-unlink>gosh&gt; (search-for-primes 1000 1100)\n\n1009 *** 4\n1013 *** 4\n1019 *** 4\n1021 *** 3\n1031 *** 4\n1033 *** 3\n1039 *** 3\n1049 *** 3\n1051 *** 4\n1061 *** 4\n1063 *** 4\n1069 *** 4\n1087 *** 4\n1091 *** 4\n1093 *** 4\n1097 *** 4\n#&lt;undef&gt;\ngosh&gt; (search-for-primes 10000 10100)\n\n10007 *** 12\n10009 *** 11\n10037 *** 11\n10039 *** 10\n10061 *** 11\n10067 *** 11\n10069 *** 11\n10079 *** 10\n10091 *** 11\n10093 *** 11\n10099 *** 10\n#&lt;undef&gt;\ngosh&gt; (search-for-primes 100000 100100)\n\n100003 *** 35\n100019 *** 34\n100043 *** 33\n100049 *** 33\n100057 *** 34\n100069 *** 33\n#&lt;undef&gt;\ngosh&gt; (search-for-primes 1000000 1000100)\n\n1000003 *** 160\n1000033 *** 104\n1000037 *** 104\n1000039 *** 104\n1000081 *** 105\n1000099 *** 105\n#&lt;undef&gt;</pre>\n\n\n<p>だいたい1.6倍になってる．ちょうど二倍にならないのは<code>next</code>で<code>if</code>を使っているためだと考えられる</p>\n\n","slug":"SICP 問題1.23"},"content":"<pre class=\"code lang-scheme\" data-lang=\"scheme\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\"><span class=\"synSpecial\">(</span><span class=\"synStatement\">define</span> <span class=\"synSpecial\">(</span>next n<span class=\"synSpecial\">)</span>\n</span><span class=\"code-line\">  <span class=\"synSpecial\">(</span><span class=\"synStatement\">if</span> <span class=\"synSpecial\">(</span><span class=\"synIdentifier\">=</span> n <span class=\"synConstant\">2</span><span class=\"synSpecial\">)</span>\n</span><span class=\"code-line\">      <span class=\"synConstant\">3</span>\n</span><span class=\"code-line\">      <span class=\"synSpecial\">(</span><span class=\"synIdentifier\">+</span> <span class=\"synConstant\">2</span> n<span class=\"synSpecial\">)))</span>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"synSpecial\">(</span><span class=\"synStatement\">define</span> <span class=\"synSpecial\">(</span>find-divisor n test-divisor<span class=\"synSpecial\">)</span>\n</span><span class=\"code-line\">  <span class=\"synSpecial\">(</span><span class=\"synStatement\">cond</span> <span class=\"synSpecial\">((</span><span class=\"synIdentifier\">></span> <span class=\"synSpecial\">(</span>square test-divisor<span class=\"synSpecial\">)</span> n<span class=\"synSpecial\">)</span> n<span class=\"synSpecial\">)</span>\n</span><span class=\"code-line\">        <span class=\"synSpecial\">((</span>divides? test-divisor n<span class=\"synSpecial\">)</span> test-divisor<span class=\"synSpecial\">)</span>\n</span><span class=\"code-line\">        <span class=\"synSpecial\">(</span><span class=\"synStatement\">else</span> <span class=\"synSpecial\">(</span>find-divisor n <span class=\"synSpecial\">(</span>next test-divisor<span class=\"synSpecial\">)))))</span>\n</span></code></pre>\n<pre class=\"code\" data-lang=\"\" data-unlink=\"\"><code class=\"code-highlight\"><span class=\"code-line\">gosh> (search-for-primes 1000 1100)\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">1009 *** 4\n</span><span class=\"code-line\">1013 *** 4\n</span><span class=\"code-line\">1019 *** 4\n</span><span class=\"code-line\">1021 *** 3\n</span><span class=\"code-line\">1031 *** 4\n</span><span class=\"code-line\">1033 *** 3\n</span><span class=\"code-line\">1039 *** 3\n</span><span class=\"code-line\">1049 *** 3\n</span><span class=\"code-line\">1051 *** 4\n</span><span class=\"code-line\">1061 *** 4\n</span><span class=\"code-line\">1063 *** 4\n</span><span class=\"code-line\">1069 *** 4\n</span><span class=\"code-line\">1087 *** 4\n</span><span class=\"code-line\">1091 *** 4\n</span><span class=\"code-line\">1093 *** 4\n</span><span class=\"code-line\">1097 *** 4\n</span><span class=\"code-line\">#&#x3C;undef>\n</span><span class=\"code-line\">gosh> (search-for-primes 10000 10100)\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">10007 *** 12\n</span><span class=\"code-line\">10009 *** 11\n</span><span class=\"code-line\">10037 *** 11\n</span><span class=\"code-line\">10039 *** 10\n</span><span class=\"code-line\">10061 *** 11\n</span><span class=\"code-line\">10067 *** 11\n</span><span class=\"code-line\">10069 *** 11\n</span><span class=\"code-line\">10079 *** 10\n</span><span class=\"code-line\">10091 *** 11\n</span><span class=\"code-line\">10093 *** 11\n</span><span class=\"code-line\">10099 *** 10\n</span><span class=\"code-line\">#&#x3C;undef>\n</span><span class=\"code-line\">gosh> (search-for-primes 100000 100100)\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">100003 *** 35\n</span><span class=\"code-line\">100019 *** 34\n</span><span class=\"code-line\">100043 *** 33\n</span><span class=\"code-line\">100049 *** 33\n</span><span class=\"code-line\">100057 *** 34\n</span><span class=\"code-line\">100069 *** 33\n</span><span class=\"code-line\">#&#x3C;undef>\n</span><span class=\"code-line\">gosh> (search-for-primes 1000000 1000100)\n</span><span class=\"code-line\">\n</span><span class=\"code-line\">1000003 *** 160\n</span><span class=\"code-line\">1000033 *** 104\n</span><span class=\"code-line\">1000037 *** 104\n</span><span class=\"code-line\">1000039 *** 104\n</span><span class=\"code-line\">1000081 *** 105\n</span><span class=\"code-line\">1000099 *** 105\n</span><span class=\"code-line\">#&#x3C;undef></span></code></pre>\n<p>だいたい1.6倍になってる．ちょうど二倍にならないのは<code>next</code>で<code>if</code>を使っているためだと考えられる</p>"},"__N_SSG":true}